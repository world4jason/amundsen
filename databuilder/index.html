



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Amundsen is a metadata driven application for improving the productivity of data analysts, data scientists and engineers when interacting with data.">
      
      
        <link rel="canonical" href="https://www.amundsen.io/amundsen/databuilder/">
      
      
        <meta name="author" content="Amundsen Project Authors.">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../img/logos/amundsen_mark_orange.svg">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-4.6.3">
    
    
      
        <title>Overview - Amundsen</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.adb8469c.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="">
      
    
    
      <script src="../assets/javascripts/modernizr.86422ebf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="#2b1b81" data-md-color-accent="#2b1b81">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#amundsen-databuilder" tabindex="0" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://www.amundsen.io/amundsen/" title="Amundsen" aria-label="Amundsen" class="md-header-nav__button md-logo">
          
            <img alt="logo" src="../img/logos/amundsen_mark_orange.svg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Amundsen
            </span>
            <span class="md-header-nav__topic">
              
                Overview
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" aria-label="search" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/amundsen-io/amundsen/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    Amundsen
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href=".." class="md-tabs__link">
        Overview
      </a>
    
  </li>

      
        
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../developer_guide/" class="md-tabs__link">
          Developer Guide
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../installation/" class="md-tabs__link">
          User Guide
        </a>
      
    </li>
  

      
        
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../frontend/" class="md-tabs__link">
          Components
        </a>
      
    </li>
  

  

      
        
      
        
      
    </ul>
  </div>
</nav>
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://www.amundsen.io/amundsen/" title="Amundsen" class="md-nav__button md-logo">
      
        <img alt="logo" src="../img/logos/amundsen_mark_orange.svg" width="48" height="48">
      
    </a>
    Amundsen
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/amundsen-io/amundsen/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    Amundsen
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../architecture/" title="Architecture" class="md-nav__link">
      Architecture
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Developer Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Developer Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../developer_guide/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../issue_labeling/" title="Issue and Feature Labeling" class="md-nav__link">
      Issue and Feature Labeling
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../CONTRIBUTING/" title="Contributing Guide" class="md-nav__link">
      Contributing Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      User Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        User Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../installation/" title="Quick Start" class="md-nav__link">
      Quick Start
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-2" type="checkbox" id="nav-4-2">
    
    <label class="md-nav__link" for="nav-4-2">
      Tutorials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-2">
        Tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorials/index-postgres/" title="How to index metadata for real life databases" class="md-nav__link">
      How to index metadata for real life databases
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorials/data-preview-with-superset/" title="How to setup a preview client with Apache Superset" class="md-nav__link">
      How to setup a preview client with Apache Superset
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorials/user-profiles/" title="How to setup user profiles" class="md-nav__link">
      How to setup user profiles
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="docs/dashboard_ingestion_guide/" title="How to ingest Dashboard" class="md-nav__link">
      How to ingest Dashboard
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorials/how-to-track-user-metric/" title="How to track user metric for Amundsen" class="md-nav__link">
      How to track user metric for Amundsen
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorials/badges/" title="How to add table level and column level badges" class="md-nav__link">
      How to add table level and column level badges
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorials/how-to-search-effective/" title="How to search Amundsen effectively" class="md-nav__link">
      How to search Amundsen effectively
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3" type="checkbox" id="nav-4-3">
    
    <label class="md-nav__link" for="nav-4-3">
      Deployment
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-3">
        Deployment
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../authentication/oidc/" title="Authentication" class="md-nav__link">
      Authentication
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../installation-aws-ecs/aws-ecs-deployment/" title="AWS ECS Installation" class="md-nav__link">
      AWS ECS Installation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../k8s_install/" title="K8S Installation" class="md-nav__link">
      K8S Installation
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      Components
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Components
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-1" type="checkbox" id="nav-5-1">
    
    <label class="md-nav__link" for="nav-5-1">
      Frontend
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-1">
        Frontend
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../frontend/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-1-2" type="checkbox" id="nav-5-1-2">
    
    <label class="md-nav__link" for="nav-5-1-2">
      Configuration
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-5-1-2">
        Configuration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../frontend/docs/application_config/" title="Application Config" class="md-nav__link">
      Application Config
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../frontend/docs/configuration/" title="React Configuration" class="md-nav__link">
      React Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../frontend/docs/flask_config/" title="Flask Configuration" class="md-nav__link">
      Flask Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../frontend/docs/examples/superset_preview_client/" title="Preview Client Setup" class="md-nav__link">
      Preview Client Setup
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../frontend/docs/developer_guide/" title="FE Developer Guide" class="md-nav__link">
      FE Developer Guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../frontend/docs/installation/" title="FE Installation Guide" class="md-nav__link">
      FE Installation Guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../frontend/docs/recommended_practices/" title="Recommended Practices" class="md-nav__link">
      Recommended Practices
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2" type="checkbox" id="nav-5-2">
    
    <label class="md-nav__link" for="nav-5-2">
      Search
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-2">
        Search
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../search/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2-2" type="checkbox" id="nav-5-2-2">
    
    <label class="md-nav__link" for="nav-5-2-2">
      Proxy
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-5-2-2">
        Proxy
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../search/docs/atlas-search/" title="Atlas Backend" class="md-nav__link">
      Atlas Backend
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-3" type="checkbox" id="nav-5-3">
    
    <label class="md-nav__link" for="nav-5-3">
      Metadata
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-3">
        Metadata
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../metadata/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-3-2" type="checkbox" id="nav-5-3-2">
    
    <label class="md-nav__link" for="nav-5-3-2">
      Configuration
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-5-3-2">
        Configuration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../metadata/docs/configurations/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../metadata/docs/structure/" title="Metadata API Structure" class="md-nav__link">
      Metadata API Structure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-3-4" type="checkbox" id="nav-5-3-4">
    
    <label class="md-nav__link" for="nav-5-3-4">
      Proxy
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-5-3-4">
        Proxy
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-3-4-1" type="checkbox" id="nav-5-3-4-1">
    
    <label class="md-nav__link" for="nav-5-3-4-1">
      Atlas Backend
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-5-3-4-1">
        Atlas Backend
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../metadata/docs/proxy/atlas_proxy/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../metadata/docs/proxy/atlas/popular_tables/" title="Popular Table" class="md-nav__link">
      Popular Table
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../metadata/docs/proxy/gremlin/" title="Gremlin Backend" class="md-nav__link">
      Gremlin Backend
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../metadata/docs/proxy/neptune/" title="Neptune Backend" class="md-nav__link">
      Neptune Backend
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-4" type="checkbox" id="nav-5-4" checked>
    
    <label class="md-nav__link" for="nav-5-4">
      Databuilder
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-4">
        Databuilder
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Overview
      </label>
    
    <a href="./" title="Overview" class="md-nav__link md-nav__link--active">
      Overview
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    Requirements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#doc" class="md-nav__link">
    Doc
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#concept" class="md-nav__link">
    Concept
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#extractor" class="md-nav__link">
    Extractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transformer" class="md-nav__link">
    Transformer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loader" class="md-nav__link">
    Loader
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#task" class="md-nav__link">
    Task
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#record" class="md-nav__link">
    Record
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#publisher" class="md-nav__link">
    Publisher
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#job" class="md-nav__link">
    Job
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model" class="md-nav__link">
    Model
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#list-of-extractors" class="md-nav__link">
    List of extractors
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dbapiextractor" class="md-nav__link">
    DBAPIExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#genericextractor" class="md-nav__link">
    GenericExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hivetablelastupdatedextractor" class="md-nav__link">
    HiveTableLastUpdatedExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hivetablemetadataextractor" class="md-nav__link">
    HiveTableMetadataExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cassandraextractor" class="md-nav__link">
    CassandraExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#glueextractor" class="md-nav__link">
    GlueExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delta-lake-metadataextractor" class="md-nav__link">
    Delta-Lake-MetadataExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dremiometadataextractor" class="md-nav__link">
    DremioMetadataExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#druidmetadataextractor" class="md-nav__link">
    DruidMetadataExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#postgresmetadataextractor" class="md-nav__link">
    PostgresMetadataExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mssqlmetadataextractor" class="md-nav__link">
    MSSQLMetadataExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mysqlmetadataextractor" class="md-nav__link">
    MysqlMetadataExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#db2metadataextractor" class="md-nav__link">
    Db2MetadataExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#snowflakemetadataextractor" class="md-nav__link">
    SnowflakeMetadataExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#snowflaketablelastupdatedextractor" class="md-nav__link">
    SnowflakeTableLastUpdatedExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bigquerymetadataextractor" class="md-nav__link">
    BigQueryMetadataExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#neo4jeslastupdatedextractor" class="md-nav__link">
    Neo4jEsLastUpdatedExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#neo4jextractor" class="md-nav__link">
    Neo4jExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#neo4jsearchdataextractor" class="md-nav__link">
    Neo4jSearchDataExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sqlalchemyextractor" class="md-nav__link">
    SQLAlchemyExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restapiextractor" class="md-nav__link">
    RestAPIExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mode-dashboard-extractor" class="md-nav__link">
    Mode Dashboard Extractor
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#modedashboardextractor" class="md-nav__link">
    ModeDashboardExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modedashboardownerextractor" class="md-nav__link">
    ModeDashboardOwnerExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modedashboardlastsuccessfulexecutionextractor" class="md-nav__link">
    ModeDashboardLastSuccessfulExecutionExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modedashboardexecutionsextractor" class="md-nav__link">
    ModeDashboardExecutionsExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modedashboardlastmodifiedtimestampextractor" class="md-nav__link">
    ModeDashboardLastModifiedTimestampExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modedashboardqueriesextractor" class="md-nav__link">
    ModeDashboardQueriesExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modedashboardchartsextractor" class="md-nav__link">
    ModeDashboardChartsExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modedashboarduserextractor" class="md-nav__link">
    ModeDashboardUserExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modedashboardusageextractor" class="md-nav__link">
    ModeDashboardUsageExtractor
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redashdashboardextractor" class="md-nav__link">
    RedashDashboardExtractor
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redashdashboardextractor-table_parser" class="md-nav__link">
    RedashDashboardExtractor: table_parser
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tableaudashboardextractor" class="md-nav__link">
    TableauDashboardExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tableaudashboardtableextractor" class="md-nav__link">
    TableauDashboardTableExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tableaudashboardqueryextractor" class="md-nav__link">
    TableauDashboardQueryExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tableaudashboardlastmodifiedextractor" class="md-nav__link">
    TableauDashboardLastModifiedExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tableauexternaltableextractor" class="md-nav__link">
    TableauExternalTableExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bamboohruserextractor" class="md-nav__link">
    BamboohrUserExtractor
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#list-of-transformers" class="md-nav__link">
    List of transformers
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#chainedtransformer" class="md-nav__link">
    ChainedTransformer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#regexstrreplacetransformer" class="md-nav__link">
    RegexStrReplaceTransformer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#templatevariablesubstitutiontransformer" class="md-nav__link">
    TemplateVariableSubstitutionTransformer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dicttomodel" class="md-nav__link">
    DictToModel
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timestampstringtoepoch" class="md-nav__link">
    TimestampStringToEpoch
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removefieldtransformer" class="md-nav__link">
    RemoveFieldTransformer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tabletagtransformer" class="md-nav__link">
    TableTagTransformer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generictransformer" class="md-nav__link">
    GenericTransformer
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#list-of-loader" class="md-nav__link">
    List of loader
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fsneo4jcsvloader" class="md-nav__link">
    FsNeo4jCSVLoader
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#genericloader" class="md-nav__link">
    GenericLoader
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fselasticsearchjsonloader" class="md-nav__link">
    FSElasticsearchJSONLoader
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#list-of-publisher" class="md-nav__link">
    List of publisher
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#neo4jcsvpublisher" class="md-nav__link">
    Neo4jCsvPublisher
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#elasticsearchpublisher" class="md-nav__link">
    ElasticsearchPublisher
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#callback" class="md-nav__link">
    Callback
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rest-api-query" class="md-nav__link">
    REST API Query
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removing-stale-data-in-neo4j-neo4jstalenessremovaltask" class="md-nav__link">
    Removing stale data in Neo4j -- Neo4jStalenessRemovalTask:
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-published_tag-to-remove-stale-data" class="md-nav__link">
    Using "published_tag" to remove stale data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-publisher_last_updated_epoch_ms-to-remove-stale-data" class="md-nav__link">
    Using "publisher_last_updated_epoch_ms" to remove stale data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dry-run" class="md-nav__link">
    Dry run
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="docs/models/" title="Models" class="md-nav__link">
      Models
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="docs/dashboard_ingestion_guide/" title="Dashboard Ingestion guide" class="md-nav__link">
      Dashboard Ingestion guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-5" type="checkbox" id="nav-5-5">
    
    <label class="md-nav__link" for="nav-5-5">
      Common
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-5">
        Common
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../common/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../faq/" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../roadmap/" title="Roadmap" class="md-nav__link">
      Roadmap
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    Requirements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#doc" class="md-nav__link">
    Doc
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#concept" class="md-nav__link">
    Concept
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#extractor" class="md-nav__link">
    Extractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transformer" class="md-nav__link">
    Transformer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loader" class="md-nav__link">
    Loader
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#task" class="md-nav__link">
    Task
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#record" class="md-nav__link">
    Record
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#publisher" class="md-nav__link">
    Publisher
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#job" class="md-nav__link">
    Job
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model" class="md-nav__link">
    Model
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#list-of-extractors" class="md-nav__link">
    List of extractors
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dbapiextractor" class="md-nav__link">
    DBAPIExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#genericextractor" class="md-nav__link">
    GenericExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hivetablelastupdatedextractor" class="md-nav__link">
    HiveTableLastUpdatedExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hivetablemetadataextractor" class="md-nav__link">
    HiveTableMetadataExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cassandraextractor" class="md-nav__link">
    CassandraExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#glueextractor" class="md-nav__link">
    GlueExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delta-lake-metadataextractor" class="md-nav__link">
    Delta-Lake-MetadataExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dremiometadataextractor" class="md-nav__link">
    DremioMetadataExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#druidmetadataextractor" class="md-nav__link">
    DruidMetadataExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#postgresmetadataextractor" class="md-nav__link">
    PostgresMetadataExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mssqlmetadataextractor" class="md-nav__link">
    MSSQLMetadataExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mysqlmetadataextractor" class="md-nav__link">
    MysqlMetadataExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#db2metadataextractor" class="md-nav__link">
    Db2MetadataExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#snowflakemetadataextractor" class="md-nav__link">
    SnowflakeMetadataExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#snowflaketablelastupdatedextractor" class="md-nav__link">
    SnowflakeTableLastUpdatedExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bigquerymetadataextractor" class="md-nav__link">
    BigQueryMetadataExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#neo4jeslastupdatedextractor" class="md-nav__link">
    Neo4jEsLastUpdatedExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#neo4jextractor" class="md-nav__link">
    Neo4jExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#neo4jsearchdataextractor" class="md-nav__link">
    Neo4jSearchDataExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sqlalchemyextractor" class="md-nav__link">
    SQLAlchemyExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restapiextractor" class="md-nav__link">
    RestAPIExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mode-dashboard-extractor" class="md-nav__link">
    Mode Dashboard Extractor
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#modedashboardextractor" class="md-nav__link">
    ModeDashboardExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modedashboardownerextractor" class="md-nav__link">
    ModeDashboardOwnerExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modedashboardlastsuccessfulexecutionextractor" class="md-nav__link">
    ModeDashboardLastSuccessfulExecutionExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modedashboardexecutionsextractor" class="md-nav__link">
    ModeDashboardExecutionsExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modedashboardlastmodifiedtimestampextractor" class="md-nav__link">
    ModeDashboardLastModifiedTimestampExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modedashboardqueriesextractor" class="md-nav__link">
    ModeDashboardQueriesExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modedashboardchartsextractor" class="md-nav__link">
    ModeDashboardChartsExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modedashboarduserextractor" class="md-nav__link">
    ModeDashboardUserExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modedashboardusageextractor" class="md-nav__link">
    ModeDashboardUsageExtractor
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redashdashboardextractor" class="md-nav__link">
    RedashDashboardExtractor
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redashdashboardextractor-table_parser" class="md-nav__link">
    RedashDashboardExtractor: table_parser
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tableaudashboardextractor" class="md-nav__link">
    TableauDashboardExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tableaudashboardtableextractor" class="md-nav__link">
    TableauDashboardTableExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tableaudashboardqueryextractor" class="md-nav__link">
    TableauDashboardQueryExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tableaudashboardlastmodifiedextractor" class="md-nav__link">
    TableauDashboardLastModifiedExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tableauexternaltableextractor" class="md-nav__link">
    TableauExternalTableExtractor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bamboohruserextractor" class="md-nav__link">
    BamboohrUserExtractor
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#list-of-transformers" class="md-nav__link">
    List of transformers
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#chainedtransformer" class="md-nav__link">
    ChainedTransformer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#regexstrreplacetransformer" class="md-nav__link">
    RegexStrReplaceTransformer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#templatevariablesubstitutiontransformer" class="md-nav__link">
    TemplateVariableSubstitutionTransformer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dicttomodel" class="md-nav__link">
    DictToModel
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timestampstringtoepoch" class="md-nav__link">
    TimestampStringToEpoch
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removefieldtransformer" class="md-nav__link">
    RemoveFieldTransformer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tabletagtransformer" class="md-nav__link">
    TableTagTransformer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generictransformer" class="md-nav__link">
    GenericTransformer
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#list-of-loader" class="md-nav__link">
    List of loader
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fsneo4jcsvloader" class="md-nav__link">
    FsNeo4jCSVLoader
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#genericloader" class="md-nav__link">
    GenericLoader
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fselasticsearchjsonloader" class="md-nav__link">
    FSElasticsearchJSONLoader
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#list-of-publisher" class="md-nav__link">
    List of publisher
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#neo4jcsvpublisher" class="md-nav__link">
    Neo4jCsvPublisher
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#elasticsearchpublisher" class="md-nav__link">
    ElasticsearchPublisher
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#callback" class="md-nav__link">
    Callback
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rest-api-query" class="md-nav__link">
    REST API Query
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removing-stale-data-in-neo4j-neo4jstalenessremovaltask" class="md-nav__link">
    Removing stale data in Neo4j -- Neo4jStalenessRemovalTask:
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-published_tag-to-remove-stale-data" class="md-nav__link">
    Using "published_tag" to remove stale data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-publisher_last_updated_epoch_ms-to-remove-stale-data" class="md-nav__link">
    Using "publisher_last_updated_epoch_ms" to remove stale data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dry-run" class="md-nav__link">
    Dry run
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/amundsen-io/amundsen/edit/master/docs/databuilder/README.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="amundsen-databuilder">Amundsen Databuilder<a class="headerlink" href="#amundsen-databuilder" title="Permanent link">&para;</a></h1>
<p><a href="https://badge.fury.io/py/amundsen-databuilder"><img alt="PyPI version" src="https://badge.fury.io/py/amundsen-databuilder.svg" /></a>
<a href="LICENSE"><img alt="License" src="http://img.shields.io/:license-Apache%202-blue.svg" /></a>
<a href="https://pypi.org/project/amundsen-databuilder/"><img alt="PyPI - Python Version" src="https://img.shields.io/pypi/pyversions/amundsen-databuilder.svg" /></a>
<a href="https://img.shields.io/badge/PRs-welcome-brightgreen.svg"><img alt="PRs Welcome" src="https://img.shields.io/badge/PRs-welcome-brightgreen.svg" /></a>
<a href="https://amundsenworkspace.slack.com/join/shared_invite/enQtNTk2ODQ1NDU1NDI0LTc3MzQyZmM0ZGFjNzg5MzY1MzJlZTg4YjQ4YTU0ZmMxYWU2MmVlMzhhY2MzMTc1MDg0MzRjNTA4MzRkMGE0Nzk"><img alt="Slack Status" src="https://img.shields.io/badge/slack-join_chat-white.svg?logo=slack&amp;style=social" /></a></p>
<p>Amundsen Databuilder is a data ingestion library, which is inspired by <a href="https://gobblin.apache.org/">Apache Gobblin</a>. It could be used in an orchestration framework(e.g. Apache Airflow) to build data from Amundsen. You could use the library either with an adhoc python script(<a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/example/scripts/sample_data_loader.py">example</a>) or inside an Apache Airflow DAG(<a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/example/dags/hive_sample_dag.py">example</a>).</p>
<p>For information about Amundsen and our other services, visit the <a href="https://github.com/amundsen-io/amundsen#amundsen">main repository</a> <code>README.md</code> . Please also see our instructions for a <a href="https://github.com/amundsen-io/amundsen/blob/master/docs/installation.md#bootstrap-a-default-version-of-amundsen-using-docker">quick start</a> setup  of Amundsen with dummy data, and an <a href="https://github.com/amundsen-io/amundsen/blob/master/docs/architecture.md#architecture">overview of the architecture</a>.</p>
<h2 id="requirements">Requirements<a class="headerlink" href="#requirements" title="Permanent link">&para;</a></h2>
<ul>
<li>Python &gt;= 3.6.x</li>
</ul>
<h2 id="doc">Doc<a class="headerlink" href="#doc" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://www.amundsen.io/amundsen/">https://www.amundsen.io/amundsen/</a></li>
</ul>
<h2 id="concept">Concept<a class="headerlink" href="#concept" title="Permanent link">&para;</a></h2>
<p>ETL job consists of extraction of records from the source, transform records, if necessary, and load records into the sink. Amundsen Databuilder is a ETL framework for Amundsen and there are corresponding components for ETL called Extractor, Transformer, and Loader that deals with record level operation. A component called task controls all these three components.
Job is the highest level component in Databuilder that controls task and publisher and is the one that client use to launch the ETL job.</p>
<p>In Databuilder, each components are highly modularized and each components are using namespace based config, HOCON config, which makes it highly reusable and pluggable. (e.g: transformer can be reused within extractor, or extractor can be reused within extractor)
(Note that concept on components are highly motivated by <a href="https://gobblin.apache.org/" title="Apache Gobblin">Apache Gobblin</a>)</p>
<p><img alt="Databuilder components" src="docs/assets/AmundsenDataBuilder.png?raw=true" title="Title" /></p>
<h3 id="extractor"><a href="https://github.com/amundsen-io/amundsendatabuilder/tree/master/databuilder/extractor" title="Extractor">Extractor</a><a class="headerlink" href="#extractor" title="Permanent link">&para;</a></h3>
<p>Extractor extracts record from the source. This does not neccessarily mean that it only supports <a href="https://blogs.sap.com/2013/12/09/to-push-or-pull-that-is-the-question/" title="pull pattern">pull pattern</a> in ETL. For example, extracting record from messaging bus make it a push pattern in ETL.</p>
<h3 id="transformer"><a href="https://github.com/amundsen-io/amundsendatabuilder/tree/master/databuilder/transformer" title="Transformer">Transformer</a><a class="headerlink" href="#transformer" title="Permanent link">&para;</a></h3>
<p>Transfomer takes record from either extractor or from transformer itself (via ChainedTransformer) to transform record.</p>
<h3 id="loader"><a href="https://github.com/amundsen-io/amundsendatabuilder/tree/master/databuilder/loader" title="Loader">Loader</a><a class="headerlink" href="#loader" title="Permanent link">&para;</a></h3>
<p>A loader takes record from transformer or from extractor directly and load it to sink, or staging area. As loader is operated in record level, it&rsquo;s not capable of supporting atomicity.</p>
<h3 id="task"><a href="https://github.com/amundsen-io/amundsendatabuilder/tree/master/databuilder/task" title="Task">Task</a><a class="headerlink" href="#task" title="Permanent link">&para;</a></h3>
<p>A task orchestrates extractor, transformer, and loader to perform record level operation.</p>
<h3 id="record"><a href="https://github.com/amundsen-io/amundsendatabuilder/tree/master/databuilder/models" title="Record">Record</a><a class="headerlink" href="#record" title="Permanent link">&para;</a></h3>
<p>A record is represented by one of <a href="https://github.com/amundsen-io/amundsendatabuilder/tree/master/databuilder/models" title="models">models</a>.</p>
<h3 id="publisher"><a href="https://github.com/amundsen-io/amundsendatabuilder/tree/master/databuilder/publisher" title="Publisher">Publisher</a><a class="headerlink" href="#publisher" title="Permanent link">&para;</a></h3>
<p>A publisher is an optional component. It&rsquo;s common usage is to support atomicity in job level and/or to easily support bulk load into the sink.</p>
<h3 id="job"><a href="https://github.com/amundsen-io/amundsendatabuilder/tree/master/databuilder/job" title="Job">Job</a><a class="headerlink" href="#job" title="Permanent link">&para;</a></h3>
<p>Job is the highest level component in Databuilder, and it orchestrates task, and publisher.</p>
<h2 id="model"><a href="docs/models/">Model</a><a class="headerlink" href="#model" title="Permanent link">&para;</a></h2>
<p>Models are abstractions representing the domain.</p>
<h2 id="list-of-extractors">List of extractors<a class="headerlink" href="#list-of-extractors" title="Permanent link">&para;</a></h2>
<h4 id="dbapiextractor"><a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/extractor/db_api_extractor.py" title="DBAPIExtractor">DBAPIExtractor</a><a class="headerlink" href="#dbapiextractor" title="Permanent link">&para;</a></h4>
<p>An extractor that uses <a href="https://www.python.org/dev/peps/pep-0249/" title="Python Database API">Python Database API</a> interface. DBAPI requires three information, connection object that conforms DBAPI spec, a SELECT SQL statement, and a <a href="https://github.com/amundsen-io/amundsendatabuilder/tree/master/databuilder/models" title="model class">model class</a> that correspond to the output of each row of SQL statement.</p>
<div class="highlight"><pre><span></span><code><span class="n">job_config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
        <span class="s1">&#39;extractor.dbapi</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">DBAPIExtractor</span><span class="o">.</span><span class="n">CONNECTION_CONFIG_KEY</span><span class="p">):</span> <span class="n">db_api_conn</span><span class="p">,</span>
        <span class="s1">&#39;extractor.dbapi.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">DBAPIExtractor</span><span class="o">.</span><span class="n">SQL_CONFIG_KEY</span> <span class="p">):</span> <span class="n">select_sql_stmt</span><span class="p">,</span>
        <span class="s1">&#39;extractor.dbapi.model_class&#39;</span><span class="p">:</span> <span class="s1">&#39;package.module_name.class_name&#39;</span>
        <span class="p">})</span>

<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span>
    <span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span>
    <span class="n">task</span><span class="o">=</span><span class="n">DefaultTask</span><span class="p">(</span>
        <span class="n">extractor</span><span class="o">=</span><span class="n">DBAPIExtractor</span><span class="p">(),</span>
        <span class="n">loader</span><span class="o">=</span><span class="n">AnyLoader</span><span class="p">()))</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div>
<h4 id="genericextractor"><a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/extractor/generic_extractor.py" title="GenericExtractor">GenericExtractor</a><a class="headerlink" href="#genericextractor" title="Permanent link">&para;</a></h4>
<p>An extractor that takes list of dict from user through config.</p>
<h4 id="hivetablelastupdatedextractor"><a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/extractor/hive_table_last_updated_extractor.py" title="HiveTableLastUpdatedExtractor">HiveTableLastUpdatedExtractor</a><a class="headerlink" href="#hivetablelastupdatedextractor" title="Permanent link">&para;</a></h4>
<p>An extractor that extracts last updated time from Hive metastore and underlying file system. Although, hive metastore has a parameter called &ldquo;last_modified_time&rdquo;, but it cannot be used as it provides DDL timestamp not DML timestamp.
For this reason, HiveTableLastUpdatedExtractor is utilizing underlying file of Hive to fetch latest updated date. However, it is not efficient to poke all files in Hive, and it only pokes underlying storage for non-partitioned table. For partitioned table, it will fetch partition created timestamp, and it&rsquo;s close enough for last updated timestamp.</p>
<p>As getting metadata from files could be time consuming there&rsquo;re several features to increase performance.
1. Support of multithreading to parallelize metadata fetching. Although, cpython&rsquo;s multithreading is not true multithreading as it&rsquo;s bounded by single core, getting metadata of file is mostly IO bound operation. Note that number of threads should be less or equal to number of connections.
1. User can pass where clause to only include certain schema and also remove certain tables. For example, by adding something like <code>TBL_NAME NOT REGEXP '(tmp|temp)</code> would eliminate unncecessary computation.</p>
<div class="highlight"><pre><span></span><code><span class="n">job_config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
    <span class="s1">&#39;extractor.hive_table_last_updated.partitioned_table_where_clause_suffix&#39;</span><span class="p">:</span> <span class="n">partitioned_table_where_clause</span><span class="p">,</span>
    <span class="s1">&#39;extractor.hive_table_last_updated.non_partitioned_table_where_clause_suffix&#39;</span><span class="p">):</span> <span class="n">non_partitioned_table_where_clause</span><span class="p">,</span>
    <span class="s1">&#39;extractor.hive_table_last_updated.extractor.sqlalchemy.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">SQLAlchemyExtractor</span><span class="o">.</span><span class="n">CONN_STRING</span><span class="p">):</span> <span class="n">connection_string</span><span class="p">,</span>
    <span class="s1">&#39;extractor.hive_table_last_updated.extractor.fs_worker_pool_size&#39;</span><span class="p">:</span> <span class="n">pool_size</span><span class="p">,</span>
    <span class="s1">&#39;extractor.hive_table_last_updated.filesystem.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">FileSystem</span><span class="o">.</span><span class="n">DASK_FILE_SYSTEM</span><span class="p">):</span> <span class="n">s3fs</span><span class="o">.</span><span class="n">S3FileSystem</span><span class="p">(</span>
        <span class="n">anon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">config_kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;max_pool_connections&#39;</span><span class="p">:</span> <span class="n">pool_size</span><span class="p">})})</span>
<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span>
    <span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span>
    <span class="n">task</span><span class="o">=</span><span class="n">DefaultTask</span><span class="p">(</span>
        <span class="n">extractor</span><span class="o">=</span><span class="n">HiveTableLastUpdatedExtractor</span><span class="p">(),</span>
        <span class="n">loader</span><span class="o">=</span><span class="n">AnyLoader</span><span class="p">()))</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div>
<h4 id="hivetablemetadataextractor"><a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/extractor/hive_table_metadata_extractor.py" title="HiveTableMetadataExtractor">HiveTableMetadataExtractor</a><a class="headerlink" href="#hivetablemetadataextractor" title="Permanent link">&para;</a></h4>
<p>An extractor that extracts table and column metadata including database, schema, table name, table description, column name and column description from Hive metastore database.
<div class="highlight"><pre><span></span><code><span class="n">job_config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
    <span class="s1">&#39;extractor.hive_table_metadata.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">HiveTableMetadataExtractor</span><span class="o">.</span><span class="n">WHERE_CLAUSE_SUFFIX_KEY</span><span class="p">):</span> <span class="n">where_clause_suffix</span><span class="p">,</span>
    <span class="s1">&#39;extractor.hive_table_metadata.extractor.sqlalchemy.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">SQLAlchemyExtractor</span><span class="o">.</span><span class="n">CONN_STRING</span><span class="p">):</span> <span class="n">connection_string</span><span class="p">()})</span>
<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span>
    <span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span>
    <span class="n">task</span><span class="o">=</span><span class="n">DefaultTask</span><span class="p">(</span>
        <span class="n">extractor</span><span class="o">=</span><span class="n">HiveTableMetadataExtractor</span><span class="p">(),</span>
        <span class="n">loader</span><span class="o">=</span><span class="n">AnyLoader</span><span class="p">()))</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div></p>
<h4 id="cassandraextractor"><a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/extractor/cassandra_extractor.py" title="CassandraExtractor">CassandraExtractor</a><a class="headerlink" href="#cassandraextractor" title="Permanent link">&para;</a></h4>
<p>An extractor that extracts table and column metadata including keyspace, table name, column name and column type from Apache Cassandra databases</p>
<div class="highlight"><pre><span></span><code><span class="n">job_config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
    <span class="s1">&#39;extractor.cassandra.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">CassandraExtractor</span><span class="o">.</span><span class="n">CLUSTER_KEY</span><span class="p">):</span> <span class="n">cluster_identifier_string</span><span class="p">,</span>
    <span class="s1">&#39;extractor.cassandra.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">CassandraExtractor</span><span class="o">.</span><span class="n">IPS_KEY</span><span class="p">):</span> <span class="p">[</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">],</span>
    <span class="s1">&#39;extractor.cassandra.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">CassandraExtractor</span><span class="o">.</span><span class="n">KWARGS_KEY</span><span class="p">):</span> <span class="p">{},</span>
    <span class="s1">&#39;extractor.cassandra.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">CassandraExtractor</span><span class="o">.</span><span class="n">FILTER_FUNCTION_KEY</span><span class="p">):</span> <span class="n">my_filter_function</span><span class="p">,</span>

<span class="p">})</span>
<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span>
    <span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span>
    <span class="n">task</span><span class="o">=</span><span class="n">DefaultTask</span><span class="p">(</span>
        <span class="n">extractor</span><span class="o">=</span><span class="n">CassandraExtractor</span><span class="p">(),</span>
        <span class="n">loader</span><span class="o">=</span><span class="n">AnyLoader</span><span class="p">()))</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div>
<p>If using the function filter options here is the function description
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">filter</span><span class="p">(</span><span class="n">keytab</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>
  <span class="c1"># return False if you don&#39;t want to add that table and True if you want to add</span>
  <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></p>
<p>If needed to define more args on the cassandra cluster you can pass through kwargs args
<div class="highlight"><pre><span></span><code><span class="n">config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
    <span class="s1">&#39;extractor.cassandra.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">CassandraExtractor</span><span class="o">.</span><span class="n">IPS_KEY</span><span class="p">):</span> <span class="p">[</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">],</span>
    <span class="s1">&#39;extractor.cassandra.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">CassandraExtractor</span><span class="o">.</span><span class="n">KWARGS_KEY</span><span class="p">):</span> <span class="p">{</span><span class="s1">&#39;port&#39;</span><span class="p">:</span> <span class="mi">9042</span><span class="p">}</span>
<span class="p">})</span>
<span class="c1"># it will call the cluster constructor like this</span>
<span class="n">Cluster</span><span class="p">([</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></p>
<h4 id="glueextractor"><a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/extractor/glue_extractor.py" title="GlueExtractor">GlueExtractor</a><a class="headerlink" href="#glueextractor" title="Permanent link">&para;</a></h4>
<p>An extractor that extracts table and column metadata including database, schema, table name, table description, column name and column description from AWS Glue metastore.</p>
<p>Before running make sure you have a working AWS profile configured and have access to search tables on Glue
<div class="highlight"><pre><span></span><code><span class="n">job_config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
    <span class="s1">&#39;extractor.glue.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">GlueExtractor</span><span class="o">.</span><span class="n">CLUSTER_KEY</span><span class="p">):</span> <span class="n">cluster_identifier_string</span><span class="p">,</span>
    <span class="s1">&#39;extractor.glue.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">GlueExtractor</span><span class="o">.</span><span class="n">FILTER_KEY</span><span class="p">):</span> <span class="p">[]})</span>
<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span>
    <span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span>
    <span class="n">task</span><span class="o">=</span><span class="n">DefaultTask</span><span class="p">(</span>
        <span class="n">extractor</span><span class="o">=</span><span class="n">GlueExtractor</span><span class="p">(),</span>
        <span class="n">loader</span><span class="o">=</span><span class="n">AnyLoader</span><span class="p">()))</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div></p>
<p>If using the filters option here is the input format
<div class="highlight"><pre><span></span><code>[
  {
    &quot;Key&quot;: &quot;string&quot;,
    &quot;Value&quot;: &quot;string&quot;,
    &quot;Comparator&quot;: &quot;EQUALS&quot;|&quot;GREATER_THAN&quot;|&quot;LESS_THAN&quot;|&quot;GREATER_THAN_EQUALS&quot;|&quot;LESS_THAN_EQUALS&quot;
  }
  ...
]
</code></pre></div></p>
<h4 id="delta-lake-metadataextractor"><a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/extractor/delta_lake_metadata_extractor.py">Delta-Lake-MetadataExtractor</a><a class="headerlink" href="#delta-lake-metadataextractor" title="Permanent link">&para;</a></h4>
<p>An extractor that runs on a spark cluster and obtains delta-lake metadata using spark sql commands. 
This custom solution is currently necessary because the hive metastore does not contain all metadata information for delta-lake tables.
For simplicity, this extractor can also be used for all hive tables as well. </p>
<p>Because it must run on a spark cluster, 
it is required that you have an operator (for example a <a href="https://airflow.apache.org/docs/stable/_modules/airflow/contrib/operators/databricks_operator.html">databricks submit run operator</a>)
that calls the configuration code on a spark cluster. <br />
<div class="highlight"><pre><span></span><code><span class="n">spark</span> <span class="o">=</span> <span class="n">SparkSession</span><span class="o">.</span><span class="n">builder</span><span class="o">.</span><span class="n">appName</span><span class="p">(</span><span class="s2">&quot;Amundsen Delta Lake Metadata Extraction&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">getOrCreate</span><span class="p">()</span>
<span class="n">job_config</span> <span class="o">=</span> <span class="n">create_delta_lake_job_config</span><span class="p">()</span>
<span class="n">dExtractor</span> <span class="o">=</span> <span class="n">DeltaLakeMetadataExtractor</span><span class="p">()</span>
<span class="n">dExtractor</span><span class="o">.</span><span class="n">set_spark</span><span class="p">(</span><span class="n">spark</span><span class="p">)</span>
<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span><span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span>
                 <span class="n">task</span><span class="o">=</span><span class="n">DefaultTask</span><span class="p">(</span><span class="n">extractor</span><span class="o">=</span><span class="n">dExtractor</span><span class="p">,</span> <span class="n">loader</span><span class="o">=</span><span class="n">FsNeo4jCSVLoader</span><span class="p">()),</span>
                 <span class="n">publisher</span><span class="o">=</span><span class="n">Neo4jCsvPublisher</span><span class="p">())</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div></p>
<p>You can check out the sample deltalake metadata script for a full example.</p>
<h4 id="dremiometadataextractor"><a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/extractor/dremio_metadata_extractor.py">DremioMetadataExtractor</a><a class="headerlink" href="#dremiometadataextractor" title="Permanent link">&para;</a></h4>
<p>An extractor that extracts table and column metadata including database, schema, table name, table description, column name and column description from <a href="https://www.dremio.com">Dremio</a>.</p>
<p>Before running make sure that you have the Dremio ODBC driver installed. Default config values assume the default driver name for the <a href="https://docs.dremio.com/drivers/mac-odbc.html">MacBook install</a>.<br />
<div class="highlight"><pre><span></span><code><span class="n">job_config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
    <span class="s1">&#39;extractor.dremio.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">DremioMetadataExtractor</span><span class="o">.</span><span class="n">DREMIO_USER_KEY</span><span class="p">):</span> <span class="n">DREMIO_USER</span><span class="p">,</span>
    <span class="s1">&#39;extractor.dremio.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">DremioMetadataExtractor</span><span class="o">.</span><span class="n">DREMIO_PASSWORD_KEY</span><span class="p">):</span> <span class="n">DREMIO_PASSWORD</span><span class="p">,</span>
    <span class="s1">&#39;extractor.dremio.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">DremioMetadataExtractor</span><span class="o">.</span><span class="n">DREMIO_HOST_KEY</span><span class="p">):</span> <span class="n">DREMIO_HOST</span><span class="p">})</span>
<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span>
    <span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span>
    <span class="n">task</span><span class="o">=</span><span class="n">DefaultTask</span><span class="p">(</span>
        <span class="n">extractor</span><span class="o">=</span><span class="n">DremioMetadataExtractor</span><span class="p">(),</span>
        <span class="n">loader</span><span class="o">=</span><span class="n">AnyLoader</span><span class="p">()))</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div></p>
<h4 id="druidmetadataextractor"><a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/extractor/druid_metadata_extractor.py">DruidMetadataExtractor</a><a class="headerlink" href="#druidmetadataextractor" title="Permanent link">&para;</a></h4>
<p>An extractor that extracts table and column metadata including database, schema, table name, table description, column name and column description from a <a href="https://druid.apache.org/">Druid</a> DB.</p>
<p>The <code>where_clause_suffix</code> could be defined, normally you would like to filter out the in <code>INFORMATION_SCHEMA</code>.</p>
<p>You could specify the following job config
<div class="highlight"><pre><span></span><code><span class="n">conn_string</span> <span class="o">=</span> <span class="s2">&quot;druid+https://</span><span class="si">{host}</span><span class="s2">:</span><span class="si">{port}</span><span class="s2">/druid/v2/sql/&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">host</span><span class="o">=</span><span class="n">druid_broker_host</span><span class="p">,</span>
        <span class="n">port</span><span class="o">=</span><span class="mi">443</span>
<span class="p">)</span>
<span class="n">job_config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
    <span class="s1">&#39;extractor.druid_metadata.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">PostgresMetadataExtractor</span><span class="o">.</span><span class="n">WHERE_CLAUSE_SUFFIX_KEY</span><span class="p">):</span> <span class="n">where_clause_suffix</span><span class="p">,</span>
  <span class="s1">&#39;extractor.druid_metadata.extractor.sqlalchemy.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">SQLAlchemyExtractor</span><span class="o">.</span><span class="n">CONN_STRING</span><span class="p">):</span> <span class="n">conn_string</span><span class="p">()})</span>
<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span>
    <span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span>
    <span class="n">task</span><span class="o">=</span><span class="n">DefaultTask</span><span class="p">(</span>
        <span class="n">extractor</span><span class="o">=</span><span class="n">DruidMetadataExtractor</span><span class="p">(),</span>
        <span class="n">loader</span><span class="o">=</span><span class="n">AnyLoader</span><span class="p">()))</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div></p>
<h4 id="postgresmetadataextractor"><a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/extractor/postgres_metadata_extractor.py" title="PostgresMetadataExtractor">PostgresMetadataExtractor</a><a class="headerlink" href="#postgresmetadataextractor" title="Permanent link">&para;</a></h4>
<p>An extractor that extracts table and column metadata including database, schema, table name, table description, column name and column description from a Postgres or Redshift database.</p>
<p>By default, the Postgres/Redshift database name is used as the cluster name. To override this, set <code>USE_CATALOG_AS_CLUSTER_NAME</code>
to <code>False</code>, and <code>CLUSTER_KEY</code> to what you wish to use as the cluster name.</p>
<p>The <code>where_clause_suffix</code> below should define which schemas you&rsquo;d like to query (see <a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/example/dags/postgres_sample_dag.py">the sample dag</a> for an example).</p>
<p>The SQL query driving the extraction is defined <a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/extractor/postgres_metadata_extractor.py">here</a></p>
<div class="highlight"><pre><span></span><code><span class="n">job_config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
    <span class="s1">&#39;extractor.postgres_metadata.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">PostgresMetadataExtractor</span><span class="o">.</span><span class="n">WHERE_CLAUSE_SUFFIX_KEY</span><span class="p">):</span> <span class="n">where_clause_suffix</span><span class="p">,</span>
    <span class="s1">&#39;extractor.postgres_metadata.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">PostgresMetadataExtractor</span><span class="o">.</span><span class="n">USE_CATALOG_AS_CLUSTER_NAME</span><span class="p">):</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;extractor.postgres_metadata.extractor.sqlalchemy.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">SQLAlchemyExtractor</span><span class="o">.</span><span class="n">CONN_STRING</span><span class="p">):</span> <span class="n">connection_string</span><span class="p">()})</span>
<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span>
    <span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span>
    <span class="n">task</span><span class="o">=</span><span class="n">DefaultTask</span><span class="p">(</span>
        <span class="n">extractor</span><span class="o">=</span><span class="n">PostgresMetadataExtractor</span><span class="p">(),</span>
        <span class="n">loader</span><span class="o">=</span><span class="n">AnyLoader</span><span class="p">()))</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div>
<h4 id="mssqlmetadataextractor"><a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/extractor/mssql_metadata_extractor.py" title="PostgresMetadataExtractor">MSSQLMetadataExtractor</a><a class="headerlink" href="#mssqlmetadataextractor" title="Permanent link">&para;</a></h4>
<p>An extractor that extracts table and column metadata including database, schema, table name, table description, column name and column description from a Microsoft SQL database.</p>
<p>By default, the Microsoft SQL Server Database name is used as the cluster name. To override this, set <code>USE_CATALOG_AS_CLUSTER_NAME</code>
to <code>False</code>, and <code>CLUSTER_KEY</code> to what you wish to use as the cluster name.</p>
<p>The <code>where_clause_suffix</code> below should define which schemas you&rsquo;d like to query (<code>"('dbo','sys')"</code>).</p>
<p>The SQL query driving the extraction is defined <a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/extractor/mssql_metadata_extractor.py">here</a></p>
<p>This extractor is highly derived from <a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/extractor/postgres_metadata_extractor.py" title="PostgresMetadataExtractor">PostgresMetadataExtractor</a>.
<div class="highlight"><pre><span></span><code><span class="n">job_config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
    <span class="s1">&#39;extractor.mssql_metadata.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">MSSQLMetadataExtractor</span><span class="o">.</span><span class="n">WHERE_CLAUSE_SUFFIX_KEY</span><span class="p">):</span> <span class="n">where_clause_suffix</span><span class="p">,</span>
    <span class="s1">&#39;extractor.mssql_metadata.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">MSSQLMetadataExtractor</span><span class="o">.</span><span class="n">USE_CATALOG_AS_CLUSTER_NAME</span><span class="p">):</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;extractor.mssql_metadata.extractor.sqlalchemy.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">SQLAlchemyExtractor</span><span class="o">.</span><span class="n">CONN_STRING</span><span class="p">):</span> <span class="n">connection_string</span><span class="p">()})</span>
<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span>
    <span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span>
    <span class="n">task</span><span class="o">=</span><span class="n">DefaultTask</span><span class="p">(</span>
        <span class="n">extractor</span><span class="o">=</span><span class="n">MSSQLMetadataExtractor</span><span class="p">(),</span>
        <span class="n">loader</span><span class="o">=</span><span class="n">AnyLoader</span><span class="p">()))</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div></p>
<h4 id="mysqlmetadataextractor"><a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/extractor/mysql_metadata_extractor.py" title="MysqlMetadataExtractor">MysqlMetadataExtractor</a><a class="headerlink" href="#mysqlmetadataextractor" title="Permanent link">&para;</a></h4>
<p>An extractor that extracts table and column metadata including database, schema, table name, table description, column name and column description from a MYSQL database.</p>
<p>By default, the MYSQL database name is used as the cluster name. To override this, set <code>USE_CATALOG_AS_CLUSTER_NAME</code>
to <code>False</code>, and <code>CLUSTER_KEY</code> to what you wish to use as the cluster name.</p>
<p>The <code>where_clause_suffix</code> below should define which schemas you&rsquo;d like to query.</p>
<p>The SQL query driving the extraction is defined <a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/extractor/mysql_metadata_extractor.py">here</a></p>
<div class="highlight"><pre><span></span><code><span class="n">job_config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
    <span class="s1">&#39;extractor.mysql_metadata.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">MysqlMetadataExtractor</span><span class="o">.</span><span class="n">WHERE_CLAUSE_SUFFIX_KEY</span><span class="p">):</span> <span class="n">where_clause_suffix</span><span class="p">,</span>
  <span class="s1">&#39;extractor.mysql_metadata.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">MysqlMetadataExtractor</span><span class="o">.</span><span class="n">USE_CATALOG_AS_CLUSTER_NAME</span><span class="p">):</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;extractor.mysql_metadata.extractor.sqlalchemy.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">SQLAlchemyExtractor</span><span class="o">.</span><span class="n">CONN_STRING</span><span class="p">):</span> <span class="n">connection_string</span><span class="p">()})</span>
<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span><span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span>
                                 <span class="n">task</span><span class="o">=</span><span class="n">DefaultTask</span><span class="p">(</span><span class="n">extractor</span><span class="o">=</span><span class="n">MysqlMetadataExtractor</span><span class="p">(),</span> <span class="n">loader</span><span class="o">=</span><span class="n">FsNeo4jCSVLoader</span><span class="p">()),</span>
                                 <span class="n">publisher</span><span class="o">=</span><span class="n">Neo4jCsvPublisher</span><span class="p">())</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div>
<h4 id="db2metadataextractor"><a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/extractor/db2_metadata_extractor.py" title="Db2MetadataExtractor">Db2MetadataExtractor</a><a class="headerlink" href="#db2metadataextractor" title="Permanent link">&para;</a></h4>
<p>An extractor that extracts table and column metadata including database, schema, table name, table description, column name and column description from a Unix, Windows or Linux Db2 database or BigSQL.</p>
<p>The <code>where_clause_suffix</code> below should define which schemas you&rsquo;d like to query or those that you would not (see <a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/example/sample_db2_data_loader.py">the sample data loader</a> for an example).</p>
<p>The SQL query driving the extraction is defined <a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/extractor/db2_metadata_extractor.py">here</a></p>
<div class="highlight"><pre><span></span><code><span class="n">job_config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
    <span class="s1">&#39;extractor.db2_metadata.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">Db2MetadataExtractor</span><span class="o">.</span><span class="n">WHERE_CLAUSE_SUFFIX_KEY</span><span class="p">):</span> <span class="n">where_clause_suffix</span><span class="p">,</span>
    <span class="s1">&#39;extractor.db2_metadata.extractor.sqlalchemy.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">SQLAlchemyExtractor</span><span class="o">.</span><span class="n">CONN_STRING</span><span class="p">):</span> <span class="n">connection_string</span><span class="p">()})</span>
<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span>
    <span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span>
    <span class="n">task</span><span class="o">=</span><span class="n">DefaultTask</span><span class="p">(</span>
        <span class="n">extractor</span><span class="o">=</span><span class="n">Db2MetadataExtractor</span><span class="p">(),</span>
        <span class="n">loader</span><span class="o">=</span><span class="n">AnyLoader</span><span class="p">()))</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div>
<h4 id="snowflakemetadataextractor"><a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/extractor/snowflake_metadata_extractor.py" title="SnowflakeMetadataExtractor">SnowflakeMetadataExtractor</a><a class="headerlink" href="#snowflakemetadataextractor" title="Permanent link">&para;</a></h4>
<p>An extractor that extracts table and column metadata including database, schema, table name, table description, column name and column description from a Snowflake database.</p>
<p>By default, the Snowflake database name is used as the cluster name. To override this, set <code>USE_CATALOG_AS_CLUSTER_NAME</code>
to <code>False</code>, and <code>CLUSTER_KEY</code> to what you wish to use as the cluster name.</p>
<p>By default, the Snowflake database is set to <code>PROD</code>. To override this, set <code>DATABASE_KEY</code>
to <code>WhateverNameOfYourDb</code>.</p>
<p>By default, the Snowflake schema is set to <code>INFORMATION_SCHEMA</code>. To override this, set <code>SCHEMA_KEY</code>
to <code>WhateverNameOfYourSchema</code>. </p>
<p>Note that <code>ACCOUNT_USAGE</code> is a separate schema which allows users to query a wider set of data at the cost of latency.
Differences are defined <a href="https://docs.snowflake.com/en/sql-reference/account-usage.html#differences-between-account-usage-and-information-schema">here</a></p>
<p>The <code>where_clause_suffix</code> should define which schemas you&rsquo;d like to query (see <a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/example/scripts/sample_snowflake_data_loader.py">the sample dag</a> for an example).</p>
<p>The SQL query driving the extraction is defined <a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/extractor/snowflake_metadata_extractor.py">here</a></p>
<div class="highlight"><pre><span></span><code><span class="n">job_config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
    <span class="s1">&#39;extractor.snowflake.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">SnowflakeMetadataExtractor</span><span class="o">.</span><span class="n">SNOWFLAKE_DATABASE_KEY</span><span class="p">):</span> <span class="s1">&#39;YourDbName&#39;</span><span class="p">,</span>
    <span class="s1">&#39;extractor.snowflake.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">SnowflakeMetadataExtractor</span><span class="o">.</span><span class="n">WHERE_CLAUSE_SUFFIX_KEY</span><span class="p">):</span> <span class="n">where_clause_suffix</span><span class="p">,</span>
    <span class="s1">&#39;extractor.snowflake.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">SnowflakeMetadataExtractor</span><span class="o">.</span><span class="n">USE_CATALOG_AS_CLUSTER_NAME</span><span class="p">):</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;extractor.snowflake.extractor.sqlalchemy.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">SQLAlchemyExtractor</span><span class="o">.</span><span class="n">CONN_STRING</span><span class="p">):</span> <span class="n">connection_string</span><span class="p">()})</span>
<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span>
    <span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span>
    <span class="n">task</span><span class="o">=</span><span class="n">DefaultTask</span><span class="p">(</span>
        <span class="n">extractor</span><span class="o">=</span><span class="n">SnowflakeMetadataExtractor</span><span class="p">(),</span>
        <span class="n">loader</span><span class="o">=</span><span class="n">AnyLoader</span><span class="p">()))</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div>
<h4 id="snowflaketablelastupdatedextractor"><a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/extractor/snowflake_table_last_updated_extractor.py" title="SnowflakeTableLastUpdatedExtractor">SnowflakeTableLastUpdatedExtractor</a><a class="headerlink" href="#snowflaketablelastupdatedextractor" title="Permanent link">&para;</a></h4>
<p>An extractor that extracts table last updated timestamp from a Snowflake database.</p>
<p>It uses same configs as the <code>SnowflakeMetadataExtractor</code> described above.</p>
<p>The SQL query driving the extraction is defined <a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/extractor/snowflake_table_last_updated_extractor.py">here</a></p>
<div class="highlight"><pre><span></span><code><span class="n">job_config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
    <span class="s1">&#39;extractor.snowflake_table_last_updated.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">SnowflakeTableLastUpdatedExtractor</span><span class="o">.</span><span class="n">SNOWFLAKE_DATABASE_KEY</span><span class="p">):</span> <span class="s1">&#39;YourDbName&#39;</span><span class="p">,</span>
    <span class="s1">&#39;extractor.snowflake_table_last_updated.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">SnowflakeTableLastUpdatedExtractor</span><span class="o">.</span><span class="n">WHERE_CLAUSE_SUFFIX_KEY</span><span class="p">):</span> <span class="n">where_clause_suffix</span><span class="p">,</span>
       <span class="s1">&#39;extractor.snowflake_table_last_updated.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">SnowflakeTableLastUpdatedExtractor</span><span class="o">.</span><span class="n">USE_CATALOG_AS_CLUSTER_NAME</span><span class="p">):</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;extractor.snowflake_table_last_updated.extractor.sqlalchemy.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">SQLAlchemyExtractor</span><span class="o">.</span><span class="n">CONN_STRING</span><span class="p">):</span> <span class="n">connection_string</span><span class="p">()})</span>
<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span>
    <span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span>
    <span class="n">task</span><span class="o">=</span><span class="n">DefaultTask</span><span class="p">(</span>
        <span class="n">extractor</span><span class="o">=</span><span class="n">SnowflakeTableLastUpdatedExtractor</span><span class="p">(),</span>
        <span class="n">loader</span><span class="o">=</span><span class="n">AnyLoader</span><span class="p">()))</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div>
<h4 id="bigquerymetadataextractor"><a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/extractor/bigquery_metadata_extractor.py" title="BigQuery Metdata Extractor">BigQueryMetadataExtractor</a><a class="headerlink" href="#bigquerymetadataextractor" title="Permanent link">&para;</a></h4>
<p>An extractor that extracts table and column metadata including database, schema, table name, table description, column name and column description from a Bigquery database.</p>
<p>The API calls driving the extraction is defined <a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/extractor/bigquery_metadata_extractor.py">here</a></p>
<p>You will need to create a service account for reading metadata and grant it &ldquo;BigQuery Metadata Viewer&rdquo; access to all of your datasets. This can all be done via the bigquery ui.</p>
<p>Download the creditials file and store it securely. Set the <code>GOOGLE_APPLICATION_CREDENTIALS</code> environment varible to the location of your credtials files and your code should have access to everything it needs.</p>
<p>You can configure bigquery like this. You can optionally set a label filter if you only want to pull tables with a certain label.
<div class="highlight"><pre><span></span><code>    <span class="n">job_config</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;extractor.bigquery_table_metadata.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">BigQueryMetadataExtractor</span><span class="o">.</span><span class="n">PROJECT_ID_KEY</span>
            <span class="p">):</span> <span class="n">gcloud_project</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="n">label_filter</span><span class="p">:</span>
        <span class="n">job_config</span><span class="p">[</span>
            <span class="s1">&#39;extractor.bigquery_table_metadata.</span><span class="si">{}</span><span class="s1">&#39;</span>
            <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">BigQueryMetadataExtractor</span><span class="o">.</span><span class="n">FILTER_KEY</span><span class="p">)</span>
            <span class="p">]</span> <span class="o">=</span> <span class="n">label_filter</span>
    <span class="n">task</span> <span class="o">=</span> <span class="n">DefaultTask</span><span class="p">(</span><span class="n">extractor</span><span class="o">=</span><span class="n">BigQueryMetadataExtractor</span><span class="p">(),</span>
                       <span class="n">loader</span><span class="o">=</span><span class="n">csv_loader</span><span class="p">,</span>
                       <span class="n">transformer</span><span class="o">=</span><span class="n">NoopTransformer</span><span class="p">())</span>
    <span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span><span class="n">conf</span><span class="o">=</span><span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">job_config</span><span class="p">),</span>
                     <span class="n">task</span><span class="o">=</span><span class="n">task</span><span class="p">,</span>
                     <span class="n">publisher</span><span class="o">=</span><span class="n">Neo4jCsvPublisher</span><span class="p">())</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div></p>
<h4 id="neo4jeslastupdatedextractor"><a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/extractor/neo4j_es_last_updated_extractor.py" title="Neo4jEsLastUpdatedExtractor">Neo4jEsLastUpdatedExtractor</a><a class="headerlink" href="#neo4jeslastupdatedextractor" title="Permanent link">&para;</a></h4>
<p>An extractor that basically get current timestamp and passes it GenericExtractor. This extractor is basically being used to create timestamp for &ldquo;Amundsen was last indexed on &hellip;&rdquo; in Amundsen web page&rsquo;s footer.</p>
<h4 id="neo4jextractor"><a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/extractor/neo4j_extractor.py" title="Neo4jExtractor">Neo4jExtractor</a><a class="headerlink" href="#neo4jextractor" title="Permanent link">&para;</a></h4>
<p>An extractor that extracts records from Neo4j based on provided <a href="https://neo4j.com/developer/cypher/" title="Cypher query">Cypher query</a>. One example is to extract data from Neo4j so that it can transform and publish to Elasticsearch.
<div class="highlight"><pre><span></span><code><span class="n">job_config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
    <span class="s1">&#39;extractor.neo4j.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">Neo4jExtractor</span><span class="o">.</span><span class="n">CYPHER_QUERY_CONFIG_KEY</span><span class="p">):</span> <span class="n">cypher_query</span><span class="p">,</span>
    <span class="s1">&#39;extractor.neo4j.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">Neo4jExtractor</span><span class="o">.</span><span class="n">GRAPH_URL_CONFIG_KEY</span><span class="p">):</span> <span class="n">neo4j_endpoint</span><span class="p">,</span>
    <span class="s1">&#39;extractor.neo4j.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">Neo4jExtractor</span><span class="o">.</span><span class="n">MODEL_CLASS_CONFIG_KEY</span><span class="p">):</span> <span class="s1">&#39;package.module.class_name&#39;</span><span class="p">,</span>
    <span class="s1">&#39;extractor.neo4j.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">Neo4jExtractor</span><span class="o">.</span><span class="n">NEO4J_AUTH_USER</span><span class="p">):</span> <span class="n">neo4j_user</span><span class="p">,</span>
    <span class="s1">&#39;extractor.neo4j.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">Neo4jExtractor</span><span class="o">.</span><span class="n">NEO4J_AUTH_PW</span><span class="p">):</span> <span class="n">neo4j_password</span><span class="p">},</span>
    <span class="s1">&#39;extractor.neo4j.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">Neo4jExtractor</span><span class="o">.</span><span class="n">NEO4J_ENCRYPTED</span><span class="p">):</span> <span class="kc">True</span><span class="p">})</span>
<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span>
    <span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span>
    <span class="n">task</span><span class="o">=</span><span class="n">DefaultTask</span><span class="p">(</span>
        <span class="n">extractor</span><span class="o">=</span><span class="n">Neo4jExtractor</span><span class="p">(),</span>
        <span class="n">loader</span><span class="o">=</span><span class="n">AnyLoader</span><span class="p">()))</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div></p>
<h4 id="neo4jsearchdataextractor"><a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/extractor/neo4j_search_data_extractor.py" title="Neo4jSearchDataExtractor">Neo4jSearchDataExtractor</a><a class="headerlink" href="#neo4jsearchdataextractor" title="Permanent link">&para;</a></h4>
<p>An extractor that is extracting Neo4j utilizing Neo4jExtractor where CYPHER query is already embedded in it.
<div class="highlight"><pre><span></span><code><span class="n">job_config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
    <span class="s1">&#39;extractor.search_data.extractor.neo4j.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">Neo4jExtractor</span><span class="o">.</span><span class="n">GRAPH_URL_CONFIG_KEY</span><span class="p">):</span> <span class="n">neo4j_endpoint</span><span class="p">,</span>
    <span class="s1">&#39;extractor.search_data.extractor.neo4j.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">Neo4jExtractor</span><span class="o">.</span><span class="n">MODEL_CLASS_CONFIG_KEY</span><span class="p">):</span> <span class="s1">&#39;databuilder.models.neo4j_data.Neo4jDataResult&#39;</span><span class="p">,</span>
    <span class="s1">&#39;extractor.search_data.extractor.neo4j.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">Neo4jExtractor</span><span class="o">.</span><span class="n">NEO4J_AUTH_USER</span><span class="p">):</span> <span class="n">neo4j_user</span><span class="p">,</span>
    <span class="s1">&#39;extractor.search_data.extractor.neo4j.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">Neo4jExtractor</span><span class="o">.</span><span class="n">NEO4J_AUTH_PW</span><span class="p">):</span> <span class="n">neo4j_password</span><span class="p">},</span>
    <span class="s1">&#39;extractor.search_data.extractor.neo4j.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">Neo4jExtractor</span><span class="o">.</span><span class="n">NEO4J_ENCRYPTED</span><span class="p">):</span> <span class="kc">False</span><span class="p">})</span>
<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span>
    <span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span>
    <span class="n">task</span><span class="o">=</span><span class="n">DefaultTask</span><span class="p">(</span>
        <span class="n">extractor</span><span class="o">=</span><span class="n">Neo4jSearchDataExtractor</span><span class="p">(),</span>
        <span class="n">loader</span><span class="o">=</span><span class="n">AnyLoader</span><span class="p">()))</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div></p>
<h4 id="sqlalchemyextractor"><a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/extractor/sql_alchemy_extractor.py" title="SQLAlchemyExtractor">SQLAlchemyExtractor</a><a class="headerlink" href="#sqlalchemyextractor" title="Permanent link">&para;</a></h4>
<p>An extractor utilizes <a href="https://www.sqlalchemy.org/" title="SQLAlchemy">SQLAlchemy</a> to extract record from any database that support SQL Alchemy.
<div class="highlight"><pre><span></span><code><span class="n">job_config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
    <span class="s1">&#39;extractor.sqlalchemy.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">SQLAlchemyExtractor</span><span class="o">.</span><span class="n">CONN_STRING</span><span class="p">):</span> <span class="n">connection_string</span><span class="p">(),</span>
    <span class="s1">&#39;extractor.sqlalchemy.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">SQLAlchemyExtractor</span><span class="o">.</span><span class="n">EXTRACT_SQL</span><span class="p">):</span> <span class="n">sql</span><span class="p">,</span>
    <span class="s1">&#39;extractor.sqlalchemy.model_class&#39;</span><span class="p">:</span> <span class="s1">&#39;package.module.class_name&#39;</span><span class="p">})</span>
<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span>
    <span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span>
    <span class="n">task</span><span class="o">=</span><span class="n">DefaultTask</span><span class="p">(</span>
        <span class="n">extractor</span><span class="o">=</span><span class="n">SQLAlchemyExtractor</span><span class="p">(),</span>
        <span class="n">loader</span><span class="o">=</span><span class="n">AnyLoader</span><span class="p">()))</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div></p>
<h3 id="restapiextractor"><a href="databuilder/extractor/restapi/rest_api_extractor.py">RestAPIExtractor</a><a class="headerlink" href="#restapiextractor" title="Permanent link">&para;</a></h3>
<p>A extractor that utilizes <a href="#rest-api-query">RestAPIQuery</a> to extract data. RestAPIQuery needs to be constructed (<a href="databuilder/extractor/dashboard/mode_analytics/mode_dashboard_extractor.py#L40">example</a>) and needs to be injected to RestAPIExtractor.</p>
<h3 id="mode-dashboard-extractor">Mode Dashboard Extractor<a class="headerlink" href="#mode-dashboard-extractor" title="Permanent link">&para;</a></h3>
<p>Here are extractors that extracts metadata information from Mode via Mode&rsquo;s REST API.</p>
<p>Prerequisite:</p>
<ol>
<li>You will need to <a href="https://mode.com/developer/api-reference/authentication/">create API access token</a> that has admin privilege.</li>
<li>You will need organization code. This is something you can easily get by looking at one of Mode report&rsquo;s URL.   <br />
<code>https://app.mode.com/&lt;organization code&gt;/reports/report_token</code></li>
</ol>
<h4 id="modedashboardextractor"><a href="databuilder/extractor/dashboard/mode_analytics/mode_dashboard_extractor.py">ModeDashboardExtractor</a><a class="headerlink" href="#modedashboardextractor" title="Permanent link">&para;</a></h4>
<p>A Extractor that extracts core metadata on Mode dashboard. <a href="https://app.mode.com/">https://app.mode.com/</a></p>
<p>It extracts list of reports that consists of:
Dashboard group name (Space name)
Dashboard group id (Space token)
Dashboard group description (Space description)
Dashboard name (Report name)
Dashboard id (Report token)
Dashboard description (Report description)</p>
<p>Other information such as report run, owner, chart name, query name is in separate extractor.</p>
<p>It calls two APIs (<a href="https://mode.com/developer/api-reference/management/spaces/#listSpaces">spaces API</a> and <a href="https://mode.com/developer/api-reference/analytics/reports/#listReportsInSpace">reports API</a>) joining together.</p>
<p>You can create Databuilder job config like this.
<div class="highlight"><pre><span></span><code><span class="n">task</span> <span class="o">=</span> <span class="n">DefaultTask</span><span class="p">(</span><span class="n">extractor</span><span class="o">=</span><span class="n">ModeDashboardExtractor</span><span class="p">(),</span>
                   <span class="n">loader</span><span class="o">=</span><span class="n">FsNeo4jCSVLoader</span><span class="p">(),</span> <span class="p">)</span>

<span class="n">tmp_folder</span> <span class="o">=</span> <span class="s1">&#39;/var/tmp/amundsen/mode_dashboard_metadata&#39;</span>

<span class="n">node_files_folder</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{tmp_folder}</span><span class="s1">/nodes&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tmp_folder</span><span class="o">=</span><span class="n">tmp_folder</span><span class="p">)</span>
<span class="n">relationship_files_folder</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{tmp_folder}</span><span class="s1">/relationships&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tmp_folder</span><span class="o">=</span><span class="n">tmp_folder</span><span class="p">)</span>

<span class="n">job_config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
    <span class="s1">&#39;extractor.mode_dashboard.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ORGANIZATION</span><span class="p">):</span> <span class="n">organization</span><span class="p">,</span>
    <span class="s1">&#39;extractor.mode_dashboard.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">MODE_ACCESS_TOKEN</span><span class="p">):</span> <span class="n">mode_token</span><span class="p">,</span>
    <span class="s1">&#39;extractor.mode_dashboard.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">MODE_PASSWORD_TOKEN</span><span class="p">):</span> <span class="n">mode_password</span><span class="p">,</span>
    <span class="s1">&#39;loader.filesystem_csv_neo4j.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">FsNeo4jCSVLoader</span><span class="o">.</span><span class="n">NODE_DIR_PATH</span><span class="p">):</span> <span class="n">node_files_folder</span><span class="p">,</span>
    <span class="s1">&#39;loader.filesystem_csv_neo4j.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">FsNeo4jCSVLoader</span><span class="o">.</span><span class="n">RELATION_DIR_PATH</span><span class="p">):</span> <span class="n">relationship_files_folder</span><span class="p">,</span>
    <span class="s1">&#39;loader.filesystem_csv_neo4j.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">FsNeo4jCSVLoader</span><span class="o">.</span><span class="n">SHOULD_DELETE_CREATED_DIR</span><span class="p">):</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;task.progress_report_frequency&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
    <span class="s1">&#39;publisher.neo4j.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">neo4j_csv_publisher</span><span class="o">.</span><span class="n">NODE_FILES_DIR</span><span class="p">):</span> <span class="n">node_files_folder</span><span class="p">,</span>
    <span class="s1">&#39;publisher.neo4j.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">neo4j_csv_publisher</span><span class="o">.</span><span class="n">RELATION_FILES_DIR</span><span class="p">):</span> <span class="n">relationship_files_folder</span><span class="p">,</span>
    <span class="s1">&#39;publisher.neo4j.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">neo4j_csv_publisher</span><span class="o">.</span><span class="n">NEO4J_END_POINT_KEY</span><span class="p">):</span> <span class="n">neo4j_endpoint</span><span class="p">,</span>
    <span class="s1">&#39;publisher.neo4j.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">neo4j_csv_publisher</span><span class="o">.</span><span class="n">NEO4J_USER</span><span class="p">):</span> <span class="n">neo4j_user</span><span class="p">,</span>
    <span class="s1">&#39;publisher.neo4j.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">neo4j_csv_publisher</span><span class="o">.</span><span class="n">NEO4J_PASSWORD</span><span class="p">):</span> <span class="n">neo4j_password</span><span class="p">,</span>
    <span class="s1">&#39;publisher.neo4j.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">neo4j_csv_publisher</span><span class="o">.</span><span class="n">NEO4J_ENCRYPTED</span><span class="p">):</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;publisher.neo4j.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">neo4j_csv_publisher</span><span class="o">.</span><span class="n">NEO4J_CREATE_ONLY_NODES</span><span class="p">):</span> <span class="p">[</span><span class="n">DESCRIPTION_NODE_LABEL</span><span class="p">],</span>
    <span class="s1">&#39;publisher.neo4j.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">neo4j_csv_publisher</span><span class="o">.</span><span class="n">JOB_PUBLISH_TAG</span><span class="p">):</span> <span class="n">job_publish_tag</span>
<span class="p">})</span>

<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span><span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span>
                 <span class="n">task</span><span class="o">=</span><span class="n">task</span><span class="p">,</span>
                 <span class="n">publisher</span><span class="o">=</span><span class="n">Neo4jCsvPublisher</span><span class="p">())</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div></p>
<h4 id="modedashboardownerextractor"><a href="databuilder/extractor/dashboard/mode_analytics/mode_dashboard_owner_extractor.py">ModeDashboardOwnerExtractor</a><a class="headerlink" href="#modedashboardownerextractor" title="Permanent link">&para;</a></h4>
<p>An Extractor that extracts Dashboard owner. Mode itself does not have concept of owner and it will use creator as owner. Note that if user left the organization, it would skip the dashboard.</p>
<p>You can create Databuilder job config like this. (configuration related to loader and publisher is omitted as it is mostly the same. Please take a look at this <a href="#ModeDashboardExtractor">example</a> for the configuration that holds loader and publisher.</p>
<div class="highlight"><pre><span></span><code><span class="n">extractor</span> <span class="o">=</span> <span class="n">ModeDashboardOwnerExtractor</span><span class="p">()</span>
<span class="n">task</span> <span class="o">=</span> <span class="n">DefaultTask</span><span class="p">(</span><span class="n">extractor</span><span class="o">=</span><span class="n">extractor</span><span class="p">,</span>
                   <span class="n">loader</span><span class="o">=</span><span class="n">FsNeo4jCSVLoader</span><span class="p">(),</span> <span class="p">)</span>

<span class="n">job_config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
    <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">extractor</span><span class="o">.</span><span class="n">get_scope</span><span class="p">(),</span> <span class="n">ORGANIZATION</span><span class="p">):</span> <span class="n">organization</span><span class="p">,</span>
    <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">extractor</span><span class="o">.</span><span class="n">get_scope</span><span class="p">(),</span> <span class="n">MODE_ACCESS_TOKEN</span><span class="p">):</span> <span class="n">mode_token</span><span class="p">,</span>
    <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">extractor</span><span class="o">.</span><span class="n">get_scope</span><span class="p">(),</span> <span class="n">MODE_PASSWORD_TOKEN</span><span class="p">):</span> <span class="n">mode_password</span><span class="p">,</span>
<span class="p">})</span>

<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span><span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span>
                 <span class="n">task</span><span class="o">=</span><span class="n">task</span><span class="p">,</span>
                 <span class="n">publisher</span><span class="o">=</span><span class="n">Neo4jCsvPublisher</span><span class="p">())</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div>
<h4 id="modedashboardlastsuccessfulexecutionextractor"><a href="databuilder/extractor/dashboard/mode_analytics/mode_dashboard_last_successful_executions_extractor.py">ModeDashboardLastSuccessfulExecutionExtractor</a><a class="headerlink" href="#modedashboardlastsuccessfulexecutionextractor" title="Permanent link">&para;</a></h4>
<p>A Extractor that extracts Mode dashboard&rsquo;s last successful run (execution) timestamp.</p>
<p>You can create Databuilder job config like this. (configuration related to loader and publisher is omitted as it is mostly the same. Please take a look at this <a href="#ModeDashboardExtractor">example</a> for the configuration that holds loader and publisher.</p>
<div class="highlight"><pre><span></span><code><span class="n">extractor</span> <span class="o">=</span> <span class="n">ModeDashboardLastSuccessfulExecutionExtractor</span><span class="p">()</span>
<span class="n">task</span> <span class="o">=</span> <span class="n">DefaultTask</span><span class="p">(</span><span class="n">extractor</span><span class="o">=</span><span class="n">extractor</span><span class="p">,</span>
                   <span class="n">loader</span><span class="o">=</span><span class="n">FsNeo4jCSVLoader</span><span class="p">(),</span> <span class="p">)</span>

<span class="n">job_config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
    <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">extractor</span><span class="o">.</span><span class="n">get_scope</span><span class="p">(),</span> <span class="n">ORGANIZATION</span><span class="p">):</span> <span class="n">organization</span><span class="p">,</span>
    <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">extractor</span><span class="o">.</span><span class="n">get_scope</span><span class="p">(),</span> <span class="n">MODE_ACCESS_TOKEN</span><span class="p">):</span> <span class="n">mode_token</span><span class="p">,</span>
    <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">extractor</span><span class="o">.</span><span class="n">get_scope</span><span class="p">(),</span> <span class="n">MODE_PASSWORD_TOKEN</span><span class="p">):</span> <span class="n">mode_password</span><span class="p">,</span>
<span class="p">})</span>

<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span><span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span>
                 <span class="n">task</span><span class="o">=</span><span class="n">task</span><span class="p">,</span>
                 <span class="n">publisher</span><span class="o">=</span><span class="n">Neo4jCsvPublisher</span><span class="p">())</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div>
<h4 id="modedashboardexecutionsextractor"><a href="databuilder/extractor/dashboard/mode_analytics/mode_dashboard_executions_extractor.py">ModeDashboardExecutionsExtractor</a><a class="headerlink" href="#modedashboardexecutionsextractor" title="Permanent link">&para;</a></h4>
<p>A Extractor that extracts last run (execution) status and timestamp.</p>
<p>You can create Databuilder job config like this. (configuration related to loader and publisher is omitted as it is mostly the same. Please take a look at this <a href="#ModeDashboardExtractor">example</a> for the configuration that holds loader and publisher.</p>
<div class="highlight"><pre><span></span><code><span class="n">extractor</span> <span class="o">=</span> <span class="n">ModeDashboardExecutionsExtractor</span><span class="p">()</span>
<span class="n">task</span> <span class="o">=</span> <span class="n">DefaultTask</span><span class="p">(</span><span class="n">extractor</span><span class="o">=</span><span class="n">extractor</span><span class="p">,</span>
                   <span class="n">loader</span><span class="o">=</span><span class="n">FsNeo4jCSVLoader</span><span class="p">(),</span> <span class="p">)</span>

<span class="n">job_config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
    <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">extractor</span><span class="o">.</span><span class="n">get_scope</span><span class="p">(),</span> <span class="n">ORGANIZATION</span><span class="p">):</span> <span class="n">organization</span><span class="p">,</span>
    <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">extractor</span><span class="o">.</span><span class="n">get_scope</span><span class="p">(),</span> <span class="n">MODE_ACCESS_TOKEN</span><span class="p">):</span> <span class="n">mode_token</span><span class="p">,</span>
    <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">extractor</span><span class="o">.</span><span class="n">get_scope</span><span class="p">(),</span> <span class="n">MODE_PASSWORD_TOKEN</span><span class="p">):</span> <span class="n">mode_password</span><span class="p">,</span>
<span class="p">})</span>

<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span><span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span>
                 <span class="n">task</span><span class="o">=</span><span class="n">task</span><span class="p">,</span>
                 <span class="n">publisher</span><span class="o">=</span><span class="n">Neo4jCsvPublisher</span><span class="p">())</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div>
<h4 id="modedashboardlastmodifiedtimestampextractor"><a href="databuilder/extractor/dashboard/mode_analytics/mode_dashboard_last_modified_timestamp_extractor.py">ModeDashboardLastModifiedTimestampExtractor</a><a class="headerlink" href="#modedashboardlastmodifiedtimestampextractor" title="Permanent link">&para;</a></h4>
<p>A Extractor that extracts Mode dashboard&rsquo;s last modified timestamp.</p>
<p>You can create Databuilder job config like this. (configuration related to loader and publisher is omitted as it is mostly the same. Please take a look at this <a href="#ModeDashboardExtractor">example</a> for the configuration that holds loader and publisher.</p>
<div class="highlight"><pre><span></span><code><span class="n">extractor</span> <span class="o">=</span> <span class="n">ModeDashboardLastModifiedTimestampExtractor</span><span class="p">()</span>
<span class="n">task</span> <span class="o">=</span> <span class="n">DefaultTask</span><span class="p">(</span><span class="n">extractor</span><span class="o">=</span><span class="n">extractor</span><span class="p">,</span> <span class="n">loader</span><span class="o">=</span><span class="n">FsNeo4jCSVLoader</span><span class="p">())</span>

<span class="n">job_config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
    <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">extractor</span><span class="o">.</span><span class="n">get_scope</span><span class="p">(),</span> <span class="n">ORGANIZATION</span><span class="p">):</span> <span class="n">organization</span><span class="p">,</span>
    <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">extractor</span><span class="o">.</span><span class="n">get_scope</span><span class="p">(),</span> <span class="n">MODE_ACCESS_TOKEN</span><span class="p">):</span> <span class="n">mode_token</span><span class="p">,</span>
    <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">extractor</span><span class="o">.</span><span class="n">get_scope</span><span class="p">(),</span> <span class="n">MODE_PASSWORD_TOKEN</span><span class="p">):</span> <span class="n">mode_password</span><span class="p">,</span>
<span class="p">})</span>

<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span><span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span>
                 <span class="n">task</span><span class="o">=</span><span class="n">task</span><span class="p">,</span>
                 <span class="n">publisher</span><span class="o">=</span><span class="n">Neo4jCsvPublisher</span><span class="p">())</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div>
<h4 id="modedashboardqueriesextractor"><a href="databuilder/extractor/dashboard/mode_analytics/mode_dashboard_queries_extractor.py">ModeDashboardQueriesExtractor</a><a class="headerlink" href="#modedashboardqueriesextractor" title="Permanent link">&para;</a></h4>
<p>A Extractor that extracts Mode&rsquo;s query information.</p>
<p>You can create Databuilder job config like this. (configuration related to loader and publisher is omitted as it is mostly the same. Please take a look at this <a href="#ModeDashboardExtractor">example</a> for the configuration that holds loader and publisher.</p>
<div class="highlight"><pre><span></span><code><span class="n">extractor</span> <span class="o">=</span> <span class="n">ModeDashboardQueriesExtractor</span><span class="p">()</span>
<span class="n">task</span> <span class="o">=</span> <span class="n">DefaultTask</span><span class="p">(</span><span class="n">extractor</span><span class="o">=</span><span class="n">extractor</span><span class="p">,</span> <span class="n">loader</span><span class="o">=</span><span class="n">FsNeo4jCSVLoader</span><span class="p">())</span>

<span class="n">job_config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
    <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">extractor</span><span class="o">.</span><span class="n">get_scope</span><span class="p">(),</span> <span class="n">ORGANIZATION</span><span class="p">):</span> <span class="n">organization</span><span class="p">,</span>
    <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">extractor</span><span class="o">.</span><span class="n">get_scope</span><span class="p">(),</span> <span class="n">MODE_ACCESS_TOKEN</span><span class="p">):</span> <span class="n">mode_token</span><span class="p">,</span>
    <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">extractor</span><span class="o">.</span><span class="n">get_scope</span><span class="p">(),</span> <span class="n">MODE_PASSWORD_TOKEN</span><span class="p">):</span> <span class="n">mode_password</span><span class="p">,</span>
<span class="p">})</span>

<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span><span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span>
                 <span class="n">task</span><span class="o">=</span><span class="n">task</span><span class="p">,</span>
                 <span class="n">publisher</span><span class="o">=</span><span class="n">Neo4jCsvPublisher</span><span class="p">())</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div>
<h4 id="modedashboardchartsextractor"><a href="databuilder/extractor/dashboard/mode_analytics/mode_dashboard_charts_extractor.py">ModeDashboardChartsExtractor</a><a class="headerlink" href="#modedashboardchartsextractor" title="Permanent link">&para;</a></h4>
<p>A Extractor that extracts Mode Dashboard charts. Currently, Mode API response schema is undocumented and hard to be used for the schema seems different per chart type. For this reason, this extractor can only extracts Chart token, and Chart URL at this point.</p>
<p>You can create Databuilder job config like this. (configuration related to loader and publisher is omitted as it is mostly the same. Please take a look at this <a href="#ModeDashboardExtractor">example</a> for the configuration that holds loader and publisher.</p>
<div class="highlight"><pre><span></span><code><span class="n">extractor</span> <span class="o">=</span> <span class="n">ModeDashboardChartsExtractor</span><span class="p">()</span>
<span class="n">task</span> <span class="o">=</span> <span class="n">DefaultTask</span><span class="p">(</span><span class="n">extractor</span><span class="o">=</span><span class="n">extractor</span><span class="p">,</span> <span class="n">loader</span><span class="o">=</span><span class="n">FsNeo4jCSVLoader</span><span class="p">())</span>

<span class="n">job_config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
    <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">extractor</span><span class="o">.</span><span class="n">get_scope</span><span class="p">(),</span> <span class="n">ORGANIZATION</span><span class="p">):</span> <span class="n">organization</span><span class="p">,</span>
    <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">extractor</span><span class="o">.</span><span class="n">get_scope</span><span class="p">(),</span> <span class="n">MODE_ACCESS_TOKEN</span><span class="p">):</span> <span class="n">mode_token</span><span class="p">,</span>
    <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">extractor</span><span class="o">.</span><span class="n">get_scope</span><span class="p">(),</span> <span class="n">MODE_PASSWORD_TOKEN</span><span class="p">):</span> <span class="n">mode_password</span><span class="p">,</span>
<span class="p">})</span>

<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span><span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span>
                 <span class="n">task</span><span class="o">=</span><span class="n">task</span><span class="p">,</span>
                 <span class="n">publisher</span><span class="o">=</span><span class="n">Neo4jCsvPublisher</span><span class="p">())</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div>
<p>If your organization&rsquo;s mode account supports discovery feature(paid feature), you could leverage <a href="databuilder/extractor/dashboard/mode_analytics/batch/mode_dashboard_charts_batch_extractor.py">ModeDashboardChartsBatchExtractor</a> which does a batch call to mode API which is more performant. You need to generate a bearer account based on the API instruction.</p>
<div class="highlight"><pre><span></span><code><span class="n">extractor</span> <span class="o">=</span> <span class="n">ModeDashboardChartsBatchExtractor</span><span class="p">()</span>
<span class="n">task</span> <span class="o">=</span> <span class="n">DefaultTask</span><span class="p">(</span><span class="n">extractor</span><span class="o">=</span><span class="n">extractor</span><span class="p">,</span> <span class="n">loader</span><span class="o">=</span><span class="n">FsNeo4jCSVLoader</span><span class="p">())</span>

<span class="n">job_config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
    <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">extractor</span><span class="o">.</span><span class="n">get_scope</span><span class="p">(),</span> <span class="n">ORGANIZATION</span><span class="p">):</span> <span class="n">organization</span><span class="p">,</span>
    <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">extractor</span><span class="o">.</span><span class="n">get_scope</span><span class="p">(),</span> <span class="n">MODE_ACCESS_TOKEN</span><span class="p">):</span> <span class="n">mode_token</span><span class="p">,</span>
    <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">extractor</span><span class="o">.</span><span class="n">get_scope</span><span class="p">(),</span> <span class="n">MODE_PASSWORD_TOKEN</span><span class="p">):</span> <span class="n">mode_password</span><span class="p">,</span>
    <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">extractor</span><span class="o">.</span><span class="n">get_scope</span><span class="p">(),</span> <span class="n">MODE_BEARER_TOKEN</span><span class="p">):</span> <span class="n">mode_bearer_token</span><span class="p">,</span>
<span class="p">})</span>

<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span><span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span>
                 <span class="n">task</span><span class="o">=</span><span class="n">task</span><span class="p">,</span>
                 <span class="n">publisher</span><span class="o">=</span><span class="n">Neo4jCsvPublisher</span><span class="p">())</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div>
<h4 id="modedashboarduserextractor"><a href="databuilder/extractor/dashboard/mode_analytics/mode_dashboard_user_extractor.py">ModeDashboardUserExtractor</a><a class="headerlink" href="#modedashboarduserextractor" title="Permanent link">&para;</a></h4>
<p>A Extractor that extracts Mode user_id and then update User node.</p>
<p>You can create Databuilder job config like this. (configuration related to loader and publisher is omitted as it is mostly the same. Please take a look at this <a href="#ModeDashboardExtractor">example</a> for the configuration that holds loader and publisher.</p>
<div class="highlight"><pre><span></span><code><span class="n">extractor</span> <span class="o">=</span> <span class="n">ModeDashboardUserExtractor</span><span class="p">()</span>
<span class="n">task</span> <span class="o">=</span> <span class="n">DefaultTask</span><span class="p">(</span><span class="n">extractor</span><span class="o">=</span><span class="n">extractor</span><span class="p">,</span> <span class="n">loader</span><span class="o">=</span><span class="n">FsNeo4jCSVLoader</span><span class="p">())</span>

<span class="n">job_config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
   <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">extractor</span><span class="o">.</span><span class="n">get_scope</span><span class="p">(),</span> <span class="n">ORGANIZATION</span><span class="p">):</span> <span class="n">organization</span><span class="p">,</span>
   <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">extractor</span><span class="o">.</span><span class="n">get_scope</span><span class="p">(),</span> <span class="n">MODE_ACCESS_TOKEN</span><span class="p">):</span> <span class="n">mode_token</span><span class="p">,</span>
   <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">extractor</span><span class="o">.</span><span class="n">get_scope</span><span class="p">(),</span> <span class="n">MODE_PASSWORD_TOKEN</span><span class="p">):</span> <span class="n">mode_password</span><span class="p">,</span>
<span class="p">})</span>

<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span><span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span>
                 <span class="n">task</span><span class="o">=</span><span class="n">task</span><span class="p">,</span>
                 <span class="n">publisher</span><span class="o">=</span><span class="n">Neo4jCsvPublisher</span><span class="p">())</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div>
<h4 id="modedashboardusageextractor"><a href="databuilder/extractor/dashboard/mode_analytics/mode_dashboard_usage_extractor.py">ModeDashboardUsageExtractor</a><a class="headerlink" href="#modedashboardusageextractor" title="Permanent link">&para;</a></h4>
<p>A Extractor that extracts Mode dashboard&rsquo;s accumulated view count.</p>
<p>Note that this provides accumulated view count which does <a href="docs/dashboard_ingestion_guide/#21-ingest-dashboard-usage-data-and-decorate-neo4j-over-base-data">not effectively show relevancy</a>. Thus, fields from this extractor is not directly compatible with <a href="docs/models/#dashboardusage">DashboardUsage</a> model.</p>
<p>If you are fine with <code>accumulated usage</code>, you could use TemplateVariableSubstitutionTransformer to transform Dict payload from <a href="databuilder/extractor/dashboard/mode_analytics/mode_dashboard_usage_extractor.py">ModeDashboardUsageExtractor</a> to fit <a href="docs/models/#dashboardusage">DashboardUsage</a> and transform Dict to  <a href="docs/models/#dashboardusage">DashboardUsage</a> by <a href="databuilder/transformer/template_variable_substitution_transformer.py">TemplateVariableSubstitutionTransformer</a>, and <a href="databuilder/transformer/dict_to_model.py">DictToModel</a> transformers. (<a href="databuilder/extractor/dashboard/mode_analytics/mode_dashboard_queries_extractor.py#L36">Example</a> on how to combining these two transformers)</p>
<h3 id="redashdashboardextractor"><a href="databuilder/extractor/dashboard/redash/redash_dashboard_extractor.py">RedashDashboardExtractor</a><a class="headerlink" href="#redashdashboardextractor" title="Permanent link">&para;</a></h3>
<p>The included <code>RedashDashboardExtractor</code> provides support for extracting basic metadata for Redash dashboards (dashboard name, owner, URL, created/updated timestamps, and a generated description) and their associated queries (query name, URL, and raw query). It can be extended with a configurable table parser function to also support extraction of <code>DashboardTable</code> metadata. (See below for example usage.)</p>
<p>Note: <code>DashboardUsage</code> and <code>DashboardExecution</code> metadata are not supported in this extractor, as these concepts are not supported by the Redash API.</p>
<p>The <code>RedashDashboardExtractor</code> depends on the following Redash API endpoints: <code>GET /api/dashboards</code>, <code>GET /api/dashboards/&lt;dashboard-slug&gt;</code>. It has been tested against Redash 8 and is also expected to work with Redash 9.</p>
<div class="highlight"><pre><span></span><code><span class="n">extractor</span> <span class="o">=</span> <span class="n">RedashDashboardExtractor</span><span class="p">()</span>
<span class="n">task</span> <span class="o">=</span> <span class="n">DefaultTask</span><span class="p">(</span><span class="n">extractor</span><span class="o">=</span><span class="n">extractor</span><span class="p">,</span> <span class="n">loader</span><span class="o">=</span><span class="n">FsNeo4jCSVLoader</span><span class="p">())</span>

<span class="n">job_config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
    <span class="s1">&#39;extractor.redash_dashboard.redash_base_url&#39;</span><span class="p">:</span> <span class="n">redash_base_url</span><span class="p">,</span> <span class="c1"># ex: https://redash.example.org</span>
    <span class="s1">&#39;extractor.redash_dashboard.api_base_url&#39;</span><span class="p">:</span> <span class="n">api_base_url</span><span class="p">,</span> <span class="c1"># ex: https://redash.example.org/api</span>
    <span class="s1">&#39;extractor.redash_dashboard.api_key&#39;</span><span class="p">:</span> <span class="n">api_key</span><span class="p">,</span> <span class="c1"># ex: abc1234</span>
    <span class="s1">&#39;extractor.redash_dashboard.table_parser&#39;</span><span class="p">:</span> <span class="n">table_parser</span> <span class="c1"># ex: my_library.module.parse_tables</span>
<span class="p">})</span>

<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span><span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span>
                 <span class="n">task</span><span class="o">=</span><span class="n">task</span><span class="p">,</span>
                 <span class="n">publisher</span><span class="o">=</span><span class="n">Neo4jCsvPublisher</span><span class="p">())</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div>
<h4 id="redashdashboardextractor-table_parser">RedashDashboardExtractor: table_parser<a class="headerlink" href="#redashdashboardextractor-table_parser" title="Permanent link">&para;</a></h4>
<p>The <code>RedashDashboardExtractor</code> extracts raw queries from each dashboard. You may optionally use these queries to parse out relations to tables in Amundsen. A table parser can be provided in the configuration for the <code>RedashDashboardExtractor</code>, as seen above. This function should have type signature <code>(RedashVisualizationWidget) -&gt; Iterator[TableRelationData]</code>. For example:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">parse_tables</span><span class="p">(</span><span class="n">viz_widget</span><span class="p">:</span> <span class="n">RedashVisualizationWidget</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">TableRelationData</span><span class="p">]:</span>
    <span class="c1"># Each viz_widget corresponds to one query.</span>
    <span class="c1"># viz_widget.data_source_id is the ID of the target DB in Redash.</span>
    <span class="c1"># viz_widget.raw_query is the raw query (e.g., SQL).</span>
    <span class="k">if</span> <span class="n">viz_widget</span><span class="o">.</span><span class="n">data_source_id</span> <span class="o">==</span> <span class="mi">123</span><span class="p">:</span>
        <span class="n">table_names</span> <span class="o">=</span> <span class="n">some_sql_parser</span><span class="p">(</span><span class="n">viz_widget</span><span class="o">.</span><span class="n">raw_query</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">TableRelationData</span><span class="p">(</span><span class="s1">&#39;some_db&#39;</span><span class="p">,</span> <span class="s1">&#39;prod&#39;</span><span class="p">,</span> <span class="s1">&#39;some_schema&#39;</span><span class="p">,</span> <span class="n">tbl</span><span class="p">)</span> <span class="k">for</span> <span class="n">tbl</span> <span class="ow">in</span> <span class="n">table_names</span><span class="p">]</span>
    <span class="k">return</span> <span class="p">[]</span>
</code></pre></div>
<h3 id="tableaudashboardextractor"><a href="databuilder/extractor/dashboard/tableau/tableau_dashboard_extractor.py">TableauDashboardExtractor</a><a class="headerlink" href="#tableaudashboardextractor" title="Permanent link">&para;</a></h3>
<p>The included <code>TableauDashboardExtractor</code> provides support for extracting basic metadata for Tableau workbooks. All Tableau extractors including this one use the <a href="https://help.tableau.com/current/api/metadata_api/en-us/index.html">Tableau Metadata GraphQL API</a> to gather the metadata. Tableau &ldquo;workbooks&rdquo; are mapped to Amundsen dashboards, and the top-level project in which these workbooks preside is the dashboard group. The metadata it gathers is as follows:
- Dashboard name (Workbook name)
- Dashboard description (Workbook description)
- Dashboard creation timestamp (Workbook creation timestamp)
- Dashboard group name (Workbook top-level folder name)
- Dashboard and dashboard group URL</p>
<p>If you wish to exclude top-level projects from being loaded, specify their names in the <code>tableau_excluded_projects</code> list and workbooks from any of those projects will not be indexed.</p>
<p>Tableau&rsquo;s concept of &ldquo;owners&rdquo; does not map cleanly into Amundsen&rsquo;s understanding of owners, as the owner of a Tableau workbook is simply whoever updated it last, even if they made a very small change. This can prove problematic in determining the true point of contact for a workbook, so it&rsquo;s simply omitted for now. Similarly, the hierachy of <code>dashboard/query/chart</code> in Amundsen does not map into Tableau, where <code>charts</code> have only an optional relation to queries and vice versa. For these reasons, there are not extractors for either entity.</p>
<p>The Tableau Metadata API also does not support usage or execution statistics, so there are no extractors for these entities either.</p>
<p>Sample job config:
<div class="highlight"><pre><span></span><code><span class="n">extractor</span> <span class="o">=</span> <span class="n">TableauDashboardExtractor</span><span class="p">()</span>
<span class="n">task</span> <span class="o">=</span> <span class="n">DefaultTask</span><span class="p">(</span><span class="n">extractor</span><span class="o">=</span><span class="n">extractor</span><span class="p">,</span> <span class="n">loader</span><span class="o">=</span><span class="n">FsNeo4jCSVLoader</span><span class="p">())</span>

<span class="n">job_config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
    <span class="s1">&#39;extractor.tableau_dashboard_metadata.tableau_host&#39;</span><span class="p">:</span> <span class="n">tableau_host</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_dashboard_metadata.api_version&#39;</span><span class="p">:</span> <span class="n">tableau_api_version</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_dashboard_metadata.site_name&#39;</span><span class="p">:</span> <span class="n">tableau_site_name</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_dashboard_metadata.tableau_personal_access_token_name&#39;</span><span class="p">:</span> <span class="n">tableau_personal_access_token_name</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_dashboard_metadata.tableau_personal_access_token_secret&#39;</span><span class="p">:</span> <span class="n">tableau_personal_access_token_secret</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_dashboard_metadata.excluded_projects&#39;</span><span class="p">:</span> <span class="n">tableau_excluded_projects</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_dashboard_metadata.cluster&#39;</span><span class="p">:</span> <span class="n">tableau_dashboard_cluster</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_dashboard_metadata.database&#39;</span><span class="p">:</span> <span class="n">tableau_dashboard_database</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_dashboard_metadata.transformer.timestamp_str_to_epoch.timestamp_format&#39;</span><span class="p">:</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">T%H:%M:%SZ&quot;</span><span class="p">,</span>
<span class="p">})</span>

<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span><span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span>
                 <span class="n">task</span><span class="o">=</span><span class="n">task</span><span class="p">,</span>
                 <span class="n">publisher</span><span class="o">=</span><span class="n">Neo4jCsvPublisher</span><span class="p">())</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div></p>
<h3 id="tableaudashboardtableextractor"><a href="databuilder/extractor/dashboard/tableau/tableau_dashboard_table_extractor.py">TableauDashboardTableExtractor</a><a class="headerlink" href="#tableaudashboardtableextractor" title="Permanent link">&para;</a></h3>
<p>The included <code>TableauDashboardTableExtractor</code> provides support for extracting table metadata from Tableau workbooks. The extractor assumes all the table entities have already been created; if you are interested in using the provided <code>TableauExternalTableExtractor</code>, make sure that job runs before this one, as it will create the tables required by this job. It also assumes that the dashboards are using their names as the primary ID.</p>
<p>A sample job config is shown below. Configuration related to the loader and publisher is omitted as it is mostly the same. Please take a look at this <a href="#TableauDashboardExtractor">example</a> for the configuration that holds loader and publisher.</p>
<div class="highlight"><pre><span></span><code><span class="n">extractor</span> <span class="o">=</span> <span class="n">TableauDashboardTableExtractor</span><span class="p">()</span>
<span class="n">task</span> <span class="o">=</span> <span class="n">DefaultTask</span><span class="p">(</span><span class="n">extractor</span><span class="o">=</span><span class="n">extractor</span><span class="p">,</span> <span class="n">loader</span><span class="o">=</span><span class="n">FsNeo4jCSVLoader</span><span class="p">())</span>

<span class="n">job_config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
    <span class="s1">&#39;extractor.tableau_dashboard_table.tableau_host&#39;</span><span class="p">:</span> <span class="n">tableau_host</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_dashboard_table.api_version&#39;</span><span class="p">:</span> <span class="n">tableau_api_version</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_dashboard_table.site_name&#39;</span><span class="p">:</span> <span class="n">tableau_site_name</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_dashboard_table.tableau_personal_access_token_name&#39;</span><span class="p">:</span> <span class="n">tableau_personal_access_token_name</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_dashboard_table.tableau_personal_access_token_secret&#39;</span><span class="p">:</span> <span class="n">tableau_personal_access_token_secret</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_dashboard_table.excluded_projects&#39;</span><span class="p">:</span> <span class="n">tableau_excluded_projects</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_dashboard_table.cluster&#39;</span><span class="p">:</span> <span class="n">tableau_dashboard_cluster</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_dashboard_table.database&#39;</span><span class="p">:</span> <span class="n">tableau_dashboard_database</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_dashboard_table.external_cluster_name&#39;</span><span class="p">:</span> <span class="n">tableau_external_table_cluster</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_dashboard_table.external_schema_name&#39;</span><span class="p">:</span> <span class="n">tableau_external_table_schema</span><span class="p">,</span>
<span class="p">})</span>

<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span><span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span>
                 <span class="n">task</span><span class="o">=</span><span class="n">task</span><span class="p">,</span>
                 <span class="n">publisher</span><span class="o">=</span><span class="n">Neo4jCsvPublisher</span><span class="p">())</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div>
<h3 id="tableaudashboardqueryextractor"><a href="databuilder/extractor/dashboard/tableau/tableau_dashboard_query_extractor.py">TableauDashboardQueryExtractor</a><a class="headerlink" href="#tableaudashboardqueryextractor" title="Permanent link">&para;</a></h3>
<p>The included <code>TableauDashboardQueryExtractor</code> provides support for extracting query metadata from Tableau workbooks. It retrives the name and query text for each custom SQL query.</p>
<p>A sample job config is shown below. Configuration related to the loader and publisher is omitted as it is mostly the same. Please take a look at this <a href="#TableauDashboardExtractor">example</a> for the configuration that holds loader and publisher.</p>
<div class="highlight"><pre><span></span><code><span class="n">extractor</span> <span class="o">=</span> <span class="n">TableauDashboardQueryExtractor</span><span class="p">()</span>
<span class="n">task</span> <span class="o">=</span> <span class="n">DefaultTask</span><span class="p">(</span><span class="n">extractor</span><span class="o">=</span><span class="n">extractor</span><span class="p">,</span> <span class="n">loader</span><span class="o">=</span><span class="n">FsNeo4jCSVLoader</span><span class="p">())</span>

<span class="n">job_config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
    <span class="s1">&#39;extractor.tableau_dashboard_query.tableau_host&#39;</span><span class="p">:</span> <span class="n">tableau_host</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_dashboard_query.api_version&#39;</span><span class="p">:</span> <span class="n">tableau_api_version</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_dashboard_query.site_name&#39;</span><span class="p">:</span> <span class="n">tableau_site_name</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_dashboard_query.tableau_personal_access_token_name&#39;</span><span class="p">:</span> <span class="n">tableau_personal_access_token_name</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_dashboard_query.tableau_personal_access_token_secret&#39;</span><span class="p">:</span> <span class="n">tableau_personal_access_token_secret</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_dashboard_query.excluded_projects&#39;</span><span class="p">:</span> <span class="n">tableau_excluded_projects</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_dashboard_query.cluster&#39;</span><span class="p">:</span> <span class="n">tableau_dashboard_cluster</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_dashboard_query.database&#39;</span><span class="p">:</span> <span class="n">tableau_dashboard_database</span><span class="p">,</span>
<span class="p">})</span>

<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span><span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span>
                 <span class="n">task</span><span class="o">=</span><span class="n">task</span><span class="p">,</span>
                 <span class="n">publisher</span><span class="o">=</span><span class="n">Neo4jCsvPublisher</span><span class="p">())</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div>
<h3 id="tableaudashboardlastmodifiedextractor"><a href="databuilder/extractor/dashboard/tableau/tableau_dashboard_last_modified_extractor.py">TableauDashboardLastModifiedExtractor</a><a class="headerlink" href="#tableaudashboardlastmodifiedextractor" title="Permanent link">&para;</a></h3>
<p>The included <code>TableauDashboardLastModifiedExtractor</code> provides support for extracting the last updated timestamp for Tableau workbooks.</p>
<p>A sample job config is shown below. Configuration related to the loader and publisher is omitted as it is mostly the same. Please take a look at this <a href="#TableauDashboardExtractor">example</a> for the configuration that holds loader and publisher.</p>
<div class="highlight"><pre><span></span><code><span class="n">extractor</span> <span class="o">=</span> <span class="n">TableauDashboardQueryExtractor</span><span class="p">()</span>
<span class="n">task</span> <span class="o">=</span> <span class="n">DefaultTask</span><span class="p">(</span><span class="n">extractor</span><span class="o">=</span><span class="n">extractor</span><span class="p">,</span> <span class="n">loader</span><span class="o">=</span><span class="n">FsNeo4jCSVLoader</span><span class="p">())</span>

<span class="n">job_config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
    <span class="s1">&#39;extractor.tableau_dashboard_last_modified.tableau_host&#39;</span><span class="p">:</span> <span class="n">tableau_host</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_dashboard_last_modified.api_version&#39;</span><span class="p">:</span> <span class="n">tableau_api_version</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_dashboard_last_modified.site_name&#39;</span><span class="p">:</span> <span class="n">tableau_site_name</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_dashboard_last_modified.tableau_personal_access_token_name&#39;</span><span class="p">:</span> <span class="n">tableau_personal_access_token_name</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_dashboard_last_modified.tableau_personal_access_token_secret&#39;</span><span class="p">:</span> <span class="n">tableau_personal_access_token_secret</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_dashboard_last_modified.excluded_projects&#39;</span><span class="p">:</span> <span class="n">tableau_excluded_projects</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_dashboard_last_modified.cluster&#39;</span><span class="p">:</span> <span class="n">tableau_dashboard_cluster</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_dashboard_last_modified.database&#39;</span><span class="p">:</span> <span class="n">tableau_dashboard_database</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_dashboard_last_modified.transformer.timestamp_str_to_epoch.timestamp_format&#39;</span><span class="p">:</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">T%H:%M:%SZ&quot;</span><span class="p">,</span>
<span class="p">})</span>

<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span><span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span>
                 <span class="n">task</span><span class="o">=</span><span class="n">task</span><span class="p">,</span>
                 <span class="n">publisher</span><span class="o">=</span><span class="n">Neo4jCsvPublisher</span><span class="p">())</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div>
<h3 id="tableauexternaltableextractor"><a href="databuilder/extractor/dashboard/tableau/tableau_external_table_extractor.py">TableauExternalTableExtractor</a><a class="headerlink" href="#tableauexternaltableextractor" title="Permanent link">&para;</a></h3>
<p>The included <code>TableauExternalTableExtractor</code> provides support for extracting external table entities referenced by Tableau workbooks. In this context, &ldquo;external&rdquo; tables are &ldquo;tables&rdquo; that are not from a typical database, and are loaded using some other data format, like CSV files.
This extractor has been tested with the following types of external tables; feel free to add others, but it&rsquo;s recommended
to test them in a non-production instance first to be safe.
- Excel spreadsheets
- Text files (including CSV files)
- Salesforce connections
- Google Sheets connections</p>
<p>Use the <code>external_table_types</code> list config option to specify which external connection types you would like to index;
refer to your Tableau instance for the exact formatting of each connection type string.</p>
<p>Excel spreadsheets, Salesforce connections, and Google Sheets connections are all classified as
&ldquo;databases&rdquo; in terms of Tableau&rsquo;s Metadata API, with their &ldquo;subsheets&rdquo; forming their &ldquo;tables&rdquo; when
present. However, these tables are not assigned a schema, this extractor chooses to use the name
of the parent sheet as the schema, and assign a new table to each subsheet. The connection type is
always used as the database, and for text files, the schema is set using the <code>external_schema_name</code>
config option. Since these external tables are usually named for human consumption only and often
contain a wider range of characters, all inputs are sanitized to remove any problematic
occurences before they are inserted: see the <code>sanitize</code> methods <code>TableauDashboardUtils</code> for specifics.</p>
<p>A more concrete example: if one had a Google Sheet titled &ldquo;Growth by Region&rdquo; with 2 subsheets called
&ldquo;FY19 Report&rdquo; and &ldquo;FY20 Report&rdquo;, two tables would be generated with the following keys:
<code>googlesheets://external.growth_by_region/FY_19_Report</code>
<code>googlesheets://external.growth_by_region/FY_20_Report</code></p>
<p>A sample job config is shown below. Configuration related to the loader and publisher is omitted as it is mostly the same. Please take a look at this <a href="#TableauDashboardExtractor">example</a> for the configuration that holds loader and publisher.</p>
<div class="highlight"><pre><span></span><code><span class="n">extractor</span> <span class="o">=</span> <span class="n">TableauExternalTableExtractor</span><span class="p">()</span>
<span class="n">task</span> <span class="o">=</span> <span class="n">DefaultTask</span><span class="p">(</span><span class="n">extractor</span><span class="o">=</span><span class="n">extractor</span><span class="p">,</span> <span class="n">loader</span><span class="o">=</span><span class="n">FsNeo4jCSVLoader</span><span class="p">())</span>

<span class="n">job_config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
    <span class="s1">&#39;extractor.tableau_external_table.tableau_host&#39;</span><span class="p">:</span> <span class="n">tableau_host</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_external_table.api_version&#39;</span><span class="p">:</span> <span class="n">tableau_api_version</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_external_table.site_name&#39;</span><span class="p">:</span> <span class="n">tableau_site_name</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_external_table.tableau_personal_access_token_name&#39;</span><span class="p">:</span> <span class="n">tableau_personal_access_token_name</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_external_table.tableau_personal_access_token_secret&#39;</span><span class="p">:</span> <span class="n">tableau_personal_access_token_secret</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_external_table.excluded_projects&#39;</span><span class="p">:</span> <span class="n">tableau_excluded_projects</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_external_table.cluster&#39;</span><span class="p">:</span> <span class="n">tableau_dashboard_cluster</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_external_table.database&#39;</span><span class="p">:</span> <span class="n">tableau_dashboard_database</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_external_table.external_cluster_name&#39;</span><span class="p">:</span> <span class="n">tableau_external_table_cluster</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_external_table.external_schema_name&#39;</span><span class="p">:</span> <span class="n">tableau_external_table_schema</span><span class="p">,</span>
    <span class="s1">&#39;extractor.tableau_external_table.external_table_types&#39;</span><span class="p">:</span> <span class="n">tableau_external_table_types</span>
<span class="p">})</span>

<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span><span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span>
                 <span class="n">task</span><span class="o">=</span><span class="n">task</span><span class="p">,</span>
                 <span class="n">publisher</span><span class="o">=</span><span class="n">Neo4jCsvPublisher</span><span class="p">())</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div>
<h3 id="bamboohruserextractor"><a href="databuilder/extractor/user/bamboohr/bamboohr_user_extractor.py">BamboohrUserExtractor</a><a class="headerlink" href="#bamboohruserextractor" title="Permanent link">&para;</a></h3>
<p>The included <code>BamboohrUserExtractor</code> provides support for extracting basic user metadata from <a href="https://www.bamboohr.com/">BambooHR</a>.  For companies and organizations that use BambooHR to store employee information such as email addresses, first names, last names, titles, and departments, use the <code>BamboohrUserExtractor</code> to populate Amundsen user data.</p>
<p>A sample job config is shown below.</p>
<div class="highlight"><pre><span></span><code><span class="n">extractor</span> <span class="o">=</span> <span class="n">BamboohrUserExtractor</span><span class="p">()</span>
<span class="n">task</span> <span class="o">=</span> <span class="n">DefaultTask</span><span class="p">(</span><span class="n">extractor</span><span class="o">=</span><span class="n">extractor</span><span class="p">,</span> <span class="n">loader</span><span class="o">=</span><span class="n">FsNeo4jCSVLoader</span><span class="p">())</span>

<span class="n">job_config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
    <span class="s1">&#39;extractor.bamboohr_user.api_key&#39;</span><span class="p">:</span> <span class="n">api_key</span><span class="p">,</span>
    <span class="s1">&#39;extractor.bamboohr_user.subdomain&#39;</span><span class="p">:</span> <span class="n">subdomain</span><span class="p">,</span>
<span class="p">})</span>

<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span><span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span>
                 <span class="n">task</span><span class="o">=</span><span class="n">task</span><span class="p">,</span>
                 <span class="n">publisher</span><span class="o">=</span><span class="n">Neo4jCsvPublisher</span><span class="p">())</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div>
<h2 id="list-of-transformers">List of transformers<a class="headerlink" href="#list-of-transformers" title="Permanent link">&para;</a></h2>
<h4 id="chainedtransformer"><a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/transformer/base_transformer.py#L41" title="ChainedTransformer">ChainedTransformer</a><a class="headerlink" href="#chainedtransformer" title="Permanent link">&para;</a></h4>
<p>A chanined transformer that can take multiple transformer.</p>
<h4 id="regexstrreplacetransformer"><a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/transformer/regex_str_replace_transformer.py" title="RegexStrReplaceTransformer">RegexStrReplaceTransformer</a><a class="headerlink" href="#regexstrreplacetransformer" title="Permanent link">&para;</a></h4>
<p>Generic string replacement transformer using REGEX. User can pass list of tuples where tuple contains regex and replacement pair.
<div class="highlight"><pre><span></span><code><span class="n">job_config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
    <span class="s1">&#39;transformer.regex_str_replace.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">REGEX_REPLACE_TUPLE_LIST</span><span class="p">):</span> <span class="p">[(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)],</span>
    <span class="s1">&#39;transformer.regex_str_replace.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ATTRIBUTE_NAME</span><span class="p">):</span> <span class="s1">&#39;instance_field_name&#39;</span><span class="p">,})</span>

<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span>
    <span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span>
    <span class="n">task</span><span class="o">=</span><span class="n">DefaultTask</span><span class="p">(</span>
        <span class="n">extractor</span><span class="o">=</span><span class="n">AnyExtractor</span><span class="p">(),</span>
        <span class="n">transformer</span><span class="o">=</span><span class="n">RegexStrReplaceTransformer</span><span class="p">(),</span>
        <span class="n">loader</span><span class="o">=</span><span class="n">AnyLoader</span><span class="p">()))</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div></p>
<h4 id="templatevariablesubstitutiontransformer"><a href="databuilder/transformer/template_variable_substitution_transformer.py">TemplateVariableSubstitutionTransformer</a><a class="headerlink" href="#templatevariablesubstitutiontransformer" title="Permanent link">&para;</a></h4>
<p>Adds or replaces field in Dict by string.format based on given template and provide record Dict as a template parameter.</p>
<h4 id="dicttomodel"><a href="databuilder/transformer/dict_to_model.py">DictToModel</a><a class="headerlink" href="#dicttomodel" title="Permanent link">&para;</a></h4>
<p>Transforms dictionary into model.</p>
<h4 id="timestampstringtoepoch"><a href="databuilder/transformer/timestamp_string_to_epoch.py">TimestampStringToEpoch</a><a class="headerlink" href="#timestampstringtoepoch" title="Permanent link">&para;</a></h4>
<p>Transforms string timestamp into int epoch.</p>
<h4 id="removefieldtransformer"><a href="databuilder/transformer/remove_field_transformer.py">RemoveFieldTransformer</a><a class="headerlink" href="#removefieldtransformer" title="Permanent link">&para;</a></h4>
<p>Remove fields from the Dict.</p>
<h4 id="tabletagtransformer"><a href="databuilder/transformer/table_tag_transformer.py">TableTagTransformer</a><a class="headerlink" href="#tabletagtransformer" title="Permanent link">&para;</a></h4>
<p>Adds the same set of tags to all tables produced by the job.</p>
<h4 id="generictransformer"><a href="databuilder/transformer/generic_transformer.py">GenericTransformer</a><a class="headerlink" href="#generictransformer" title="Permanent link">&para;</a></h4>
<p>Transforms dictionary based on callback function that user provides.</p>
<h2 id="list-of-loader">List of loader<a class="headerlink" href="#list-of-loader" title="Permanent link">&para;</a></h2>
<h4 id="fsneo4jcsvloader"><a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/loader/file_system_neo4j_csv_loader.py" title="FsNeo4jCSVLoader">FsNeo4jCSVLoader</a><a class="headerlink" href="#fsneo4jcsvloader" title="Permanent link">&para;</a></h4>
<p>Write node and relationship CSV file(s) that can be consumed by Neo4jCsvPublisher. It assumes that the record it consumes is instance of Neo4jCsvSerializable.</p>
<div class="highlight"><pre><span></span><code><span class="n">job_config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
    <span class="s1">&#39;loader.filesystem_csv_neo4j.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">FsNeo4jCSVLoader</span><span class="o">.</span><span class="n">NODE_DIR_PATH</span><span class="p">):</span> <span class="n">node_files_folder</span><span class="p">,</span>
    <span class="s1">&#39;loader.filesystem_csv_neo4j.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">FsNeo4jCSVLoader</span><span class="o">.</span><span class="n">RELATION_DIR_PATH</span><span class="p">):</span> <span class="n">relationship_files_folder</span><span class="p">},)</span>

<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span>
    <span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span>
    <span class="n">task</span><span class="o">=</span><span class="n">DefaultTask</span><span class="p">(</span>
        <span class="n">extractor</span><span class="o">=</span><span class="n">AnyExtractor</span><span class="p">(),</span>
        <span class="n">loader</span><span class="o">=</span><span class="n">FsNeo4jCSVLoader</span><span class="p">()),</span>
    <span class="n">publisher</span><span class="o">=</span><span class="n">Neo4jCsvPublisher</span><span class="p">())</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div>
<h4 id="genericloader"><a href="databuilder/loader/generic_loader.py">GenericLoader</a><a class="headerlink" href="#genericloader" title="Permanent link">&para;</a></h4>
<p>Loader class that calls user provided callback function with record as a parameter</p>
<p>Example that pushes Mode Dashboard accumulated usage via GenericLoader where callback_function expected to insert record to data warehouse.</p>
<div class="highlight"><pre><span></span><code><span class="n">extractor</span> <span class="o">=</span> <span class="n">ModeDashboardUsageExtractor</span><span class="p">()</span>
<span class="n">task</span> <span class="o">=</span> <span class="n">DefaultTask</span><span class="p">(</span><span class="n">extractor</span><span class="o">=</span><span class="n">extractor</span><span class="p">,</span>
                   <span class="n">loader</span><span class="o">=</span><span class="n">GenericLoader</span><span class="p">(),</span> <span class="p">)</span>

<span class="n">job_config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
    <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">extractor</span><span class="o">.</span><span class="n">get_scope</span><span class="p">(),</span> <span class="n">ORGANIZATION</span><span class="p">):</span> <span class="n">organization</span><span class="p">,</span>
    <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">MODE_ACCESS_TOKEN</span><span class="p">):</span> <span class="n">mode_token</span><span class="p">,</span>
    <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">MODE_PASSWORD_TOKEN</span><span class="p">):</span> <span class="n">mode_password</span><span class="p">,</span>
    <span class="s1">&#39;loader.generic.callback_function&#39;</span><span class="p">:</span> <span class="n">callback_function</span>
<span class="p">})</span>

<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span><span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span> <span class="n">task</span><span class="o">=</span><span class="n">task</span><span class="p">)</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div>
<h4 id="fselasticsearchjsonloader"><a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/loader/file_system_elasticsearch_json_loader.py" title="FSElasticsearchJSONLoader">FSElasticsearchJSONLoader</a><a class="headerlink" href="#fselasticsearchjsonloader" title="Permanent link">&para;</a></h4>
<p>Write Elasticsearch document in JSON format which can be consumed by ElasticsearchPublisher. It assumes that the record it consumes is instance of ElasticsearchDocument.</p>
<div class="highlight"><pre><span></span><code><span class="n">tmp_folder</span> <span class="o">=</span> <span class="s1">&#39;/var/tmp/amundsen/dummy_metadata&#39;</span>
<span class="n">node_files_folder</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{tmp_folder}</span><span class="s1">/nodes/&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tmp_folder</span><span class="o">=</span><span class="n">tmp_folder</span><span class="p">)</span>
<span class="n">relationship_files_folder</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{tmp_folder}</span><span class="s1">/relationships/&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tmp_folder</span><span class="o">=</span><span class="n">tmp_folder</span><span class="p">)</span>

<span class="n">job_config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
    <span class="s1">&#39;loader.filesystem.elasticsearch.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">FSElasticsearchJSONLoader</span><span class="o">.</span><span class="n">FILE_PATH_CONFIG_KEY</span><span class="p">):</span> <span class="n">data_file_path</span><span class="p">,</span>
    <span class="s1">&#39;loader.filesystem.elasticsearch.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">FSElasticsearchJSONLoader</span><span class="o">.</span><span class="n">FILE_MODE_CONFIG_KEY</span><span class="p">):</span> <span class="s1">&#39;w&#39;</span><span class="p">,})</span>

<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span>
    <span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span>
    <span class="n">task</span><span class="o">=</span><span class="n">DefaultTask</span><span class="p">(</span>
        <span class="n">extractor</span><span class="o">=</span><span class="n">AnyExtractor</span><span class="p">(),</span>
        <span class="n">loader</span><span class="o">=</span><span class="n">FSElasticsearchJSONLoader</span><span class="p">()),</span>
    <span class="n">publisher</span><span class="o">=</span><span class="n">ElasticsearchPublisher</span><span class="p">())</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div>
<h2 id="list-of-publisher">List of publisher<a class="headerlink" href="#list-of-publisher" title="Permanent link">&para;</a></h2>
<h4 id="neo4jcsvpublisher"><a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/publisher/neo4j_csv_publisher.py" title="Neo4jCsvPublisher">Neo4jCsvPublisher</a><a class="headerlink" href="#neo4jcsvpublisher" title="Permanent link">&para;</a></h4>
<p>A Publisher takes two folders for input and publishes to Neo4j.
One folder will contain CSV file(s) for Node where the other folder will contain CSV file(s) for Relationship. Neo4j follows Label Node properties Graph and refer to <a href="https://neo4j.com/docs/developer-manual/current/introduction/graphdb-concepts/" title="here">here</a> for more information</p>
<div class="highlight"><pre><span></span><code><span class="n">job_config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
    <span class="s1">&#39;loader.filesystem_csv_neo4j.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">FsNeo4jCSVLoader</span><span class="o">.</span><span class="n">NODE_DIR_PATH</span><span class="p">):</span> <span class="n">node_files_folder</span><span class="p">,</span>
    <span class="s1">&#39;loader.filesystem_csv_neo4j.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">FsNeo4jCSVLoader</span><span class="o">.</span><span class="n">RELATION_DIR_PATH</span><span class="p">):</span> <span class="n">relationship_files_folder</span><span class="p">,</span>
    <span class="s1">&#39;publisher.neo4j.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">neo4j_csv_publisher</span><span class="o">.</span><span class="n">NODE_FILES_DIR</span><span class="p">):</span> <span class="n">node_files_folder</span><span class="p">,</span>
    <span class="s1">&#39;publisher.neo4j.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">neo4j_csv_publisher</span><span class="o">.</span><span class="n">RELATION_FILES_DIR</span><span class="p">):</span> <span class="n">relationship_files_folder</span><span class="p">,</span>
    <span class="s1">&#39;publisher.neo4j.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">neo4j_csv_publisher</span><span class="o">.</span><span class="n">NEO4J_END_POINT_KEY</span><span class="p">):</span> <span class="n">neo4j_endpoint</span><span class="p">,</span>
    <span class="s1">&#39;publisher.neo4j.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">neo4j_csv_publisher</span><span class="o">.</span><span class="n">NEO4J_USER</span><span class="p">):</span> <span class="n">neo4j_user</span><span class="p">,</span>
    <span class="s1">&#39;publisher.neo4j.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">neo4j_csv_publisher</span><span class="o">.</span><span class="n">NEO4J_PASSWORD</span><span class="p">):</span> <span class="n">neo4j_password</span><span class="p">,</span>
    <span class="s1">&#39;publisher.neo4j.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">neo4j_csv_publisher</span><span class="o">.</span><span class="n">NEO4J_ENCRYPTED</span><span class="p">):</span> <span class="kc">True</span><span class="p">})</span>

<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span>
    <span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span>
    <span class="n">task</span><span class="o">=</span><span class="n">DefaultTask</span><span class="p">(</span>
        <span class="n">extractor</span><span class="o">=</span><span class="n">AnyExtractor</span><span class="p">(),</span>
        <span class="n">loader</span><span class="o">=</span><span class="n">FsNeo4jCSVLoader</span><span class="p">()),</span>
    <span class="n">publisher</span><span class="o">=</span><span class="n">Neo4jCsvPublisher</span><span class="p">())</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div>
<h4 id="elasticsearchpublisher"><a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/publisher/elasticsearch_publisher.py" title="ElasticsearchPublisher">ElasticsearchPublisher</a><a class="headerlink" href="#elasticsearchpublisher" title="Permanent link">&para;</a></h4>
<p>Elasticsearch Publisher uses Bulk API to load data from JSON file. Elasticsearch publisher supports atomic operation by utilizing alias in Elasticsearch.
A new index is created and data is uploaded into it. After the upload is complete, index alias is swapped to point to new index from old index and traffic is routed to new index.
<div class="highlight"><pre><span></span><code><span class="n">tmp_folder</span> <span class="o">=</span> <span class="s1">&#39;/var/tmp/amundsen/dummy_metadata&#39;</span>
<span class="n">node_files_folder</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{tmp_folder}</span><span class="s1">/nodes/&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tmp_folder</span><span class="o">=</span><span class="n">tmp_folder</span><span class="p">)</span>
<span class="n">relationship_files_folder</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{tmp_folder}</span><span class="s1">/relationships/&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tmp_folder</span><span class="o">=</span><span class="n">tmp_folder</span><span class="p">)</span>

<span class="n">job_config</span> <span class="o">=</span> <span class="n">ConfigFactory</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span>
    <span class="s1">&#39;loader.filesystem.elasticsearch.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">FSElasticsearchJSONLoader</span><span class="o">.</span><span class="n">FILE_PATH_CONFIG_KEY</span><span class="p">):</span> <span class="n">data_file_path</span><span class="p">,</span>
    <span class="s1">&#39;loader.filesystem.elasticsearch.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">FSElasticsearchJSONLoader</span><span class="o">.</span><span class="n">FILE_MODE_CONFIG_KEY</span><span class="p">):</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span>
    <span class="s1">&#39;publisher.elasticsearch.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ElasticsearchPublisher</span><span class="o">.</span><span class="n">FILE_PATH_CONFIG_KEY</span><span class="p">):</span> <span class="n">data_file_path</span><span class="p">,</span>
    <span class="s1">&#39;publisher.elasticsearch.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ElasticsearchPublisher</span><span class="o">.</span><span class="n">FILE_MODE_CONFIG_KEY</span><span class="p">):</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span>
    <span class="s1">&#39;publisher.elasticsearch</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ElasticsearchPublisher</span><span class="o">.</span><span class="n">ELASTICSEARCH_CLIENT_CONFIG_KEY</span><span class="p">):</span> <span class="n">elasticsearch_client</span><span class="p">,</span>
    <span class="s1">&#39;publisher.elasticsearch.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ElasticsearchPublisher</span><span class="o">.</span><span class="n">ELASTICSEARCH_NEW_INDEX_CONFIG_KEY</span><span class="p">):</span> <span class="n">elasticsearch_new_index</span><span class="p">,</span>
    <span class="s1">&#39;publisher.elasticsearch.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ElasticsearchPublisher</span><span class="o">.</span><span class="n">ELASTICSEARCH_DOC_TYPE_CONFIG_KEY</span><span class="p">):</span> <span class="n">elasticsearch_doc_type</span><span class="p">,</span>
    <span class="s1">&#39;publisher.elasticsearch.</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ElasticsearchPublisher</span><span class="o">.</span><span class="n">ELASTICSEARCH_ALIAS_CONFIG_KEY</span><span class="p">):</span> <span class="n">elasticsearch_index_alias</span><span class="p">,)</span>

<span class="n">job</span> <span class="o">=</span> <span class="n">DefaultJob</span><span class="p">(</span>
    <span class="n">conf</span><span class="o">=</span><span class="n">job_config</span><span class="p">,</span>
    <span class="n">task</span><span class="o">=</span><span class="n">DefaultTask</span><span class="p">(</span>
        <span class="n">extractor</span><span class="o">=</span><span class="n">AnyExtractor</span><span class="p">(),</span>
        <span class="n">loader</span><span class="o">=</span><span class="n">FSElasticsearchJSONLoader</span><span class="p">()),</span>
    <span class="n">publisher</span><span class="o">=</span><span class="n">ElasticsearchPublisher</span><span class="p">())</span>
<span class="n">job</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div></p>
<h4 id="callback"><a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/callback/call_back.py" title="Callback">Callback</a><a class="headerlink" href="#callback" title="Permanent link">&para;</a></h4>
<p>Callback interface is built upon a <a href="https://en.wikipedia.org/wiki/Observer_pattern" title="Observer pattern">Observer pattern</a> where the participant want to take any action when target&rsquo;s state changes.</p>
<p>Publisher is the first one adopting Callback where registered Callback will be called either when publish succeeded or when publish failed. In order to register callback, Publisher provides <a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/publisher/base_publisher.py#L50" title="register_call_back">register_call_back</a> method.</p>
<p>One use case is for Extractor that needs to commit when job is finished (e.g: Kafka). Having Extractor register a callback to Publisher to commit when publish is successful, extractor can safely commit by implementing commit logic into <a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/callback/call_back.py#L18" title="on_success">on_success</a> method.</p>
<h3 id="rest-api-query">REST API Query<a class="headerlink" href="#rest-api-query" title="Permanent link">&para;</a></h3>
<p>Databuilder now has a generic REST API Query capability that can be joined each other.
Most of the cases of extraction is currently from Database or Datawarehouse that is queryable via SQL. However, not all metadata sources provide our access to its Database and they mostly provide REST API to consume their metadata.</p>
<p>The challenges come with REST API is that:</p>
<ol>
<li>there&rsquo;s no explicit standard in REST API. Here, we need to conform to majority of cases (HTTP call with JSON payload &amp; response) but open for extension for different authentication scheme, and different way of pagination, etc.</li>
<li>It is hardly the case that you would get what you want from one REST API call. It is usually the case that you need to snitch (JOIN) multiple REST API calls together to get the information you want.</li>
</ol>
<p>To solve this challenges, we introduce <a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/rest_api/rest_api_query.py">RestApiQuery</a></p>
<p>RestAPIQuery is:<br />
 1. Assuming that REST API is using HTTP(S) call with GET method &ndash; RestAPIQuery intention&rsquo;s is <strong>read</strong>, not write &ndash; where basic HTTP auth is supported out of the box. There&rsquo;s extension point on other authentication scheme such as Oauth, and pagination, etc. (See <a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/rest_api/mode_analytics/mode_paginated_rest_api_query.py">ModePaginatedRestApiQuery</a> for pagination)
 2. Usually, you want the subset of the response you get from the REST API call &ndash; value extraction. To extract the value you want, RestApiQuery uses <a href="https://goessner.net/articles/JsonPath/">JSONPath</a> which is similar product as XPATH of XML.
 3. You can JOIN multiple RestApiQuery together.</p>
<p>More detail on JOIN operation in RestApiQuery:<br />
 1. It joins multiple RestApiQuery together by accepting prior RestApiQuery as a constructor &ndash; a <a href="https://en.wikipedia.org/wiki/Decorator_pattern">Decorator pattern</a>
 2. In REST API, URL is the one that locates the resource we want. Here, JOIN simply means we need to find resource <strong>based on the identifier that other query&rsquo;s result has</strong>. In other words, when RestApiQuery forms URL, it uses previous query&rsquo;s result to compute the URL <code>e.g: Previous record: {"dashboard_id": "foo"}, URL before: http://foo.bar/dashboard/{dashboard_id} URL after compute: http://foo.bar/dashboard/foo</code>
With this pattern RestApiQuery supports 1:1 and 1:N JOIN relationship.<br />
(GROUP BY or any other aggregation, sub-query join is not supported)  </p>
<p>To see in action, take a peek at <a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/extractor/dashboard/mode_analytics/mode_dashboard_extractor.py">ModeDashboardExtractor</a>
Also, take a look at how it extends to support pagination at <a href="databuilder/rest_api/mode_analytics/mode_paginated_rest_api_query.py">ModePaginatedRestApiQuery</a>.</p>
<h3 id="removing-stale-data-in-neo4j-neo4jstalenessremovaltask">Removing stale data in Neo4j &ndash; <a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/task/neo4j_staleness_removal_task.py">Neo4jStalenessRemovalTask</a>:<a class="headerlink" href="#removing-stale-data-in-neo4j-neo4jstalenessremovaltask" title="Permanent link">&para;</a></h3>
<p>As Databuilder ingestion mostly consists of either INSERT OR UPDATE, there could be some stale data that has been removed from metadata source but still remains in Neo4j database. Neo4jStalenessRemovalTask basically detects staleness and removes it.</p>
<p>In <a href="https://github.com/amundsen-io/amundsendatabuilder/blob/master/databuilder/publisher/neo4j_csv_publisher.py">Neo4jCsvPublisher</a>, it adds attributes &ldquo;published_tag&rdquo; and &ldquo;publisher_last_updated_epoch_ms&rdquo; on every nodes and relations. You can use either of these two attributes to detect staleness and remove those stale node or relation from the database.</p>
<h4 id="using-published_tag-to-remove-stale-data">Using &ldquo;published_tag&rdquo; to remove stale data<a class="headerlink" href="#using-published_tag-to-remove-stale-data" title="Permanent link">&para;</a></h4>
<p>Use <em>published_tag</em> to remove stale data, when it is certain that non-matching tag is stale once all the ingestion is completed. For example, suppose that you use current date (or execution date in Airflow) as a <em>published_tag</em>, &ldquo;2020-03-31&rdquo;. Once Databuilder ingests all tables and all columns, all table nodes and column nodes should have <em>published_tag</em> as &ldquo;2020-03-31&rdquo;. It is safe to assume that table nodes and column nodes whose <em>published_tag</em> is different &ndash; such as &ldquo;2020-03-30&rdquo; or &ldquo;2020-02-10&rdquo; &ndash; means that it is deleted from the source metadata. You can use Neo4jStalenessRemovalTask to delete those stale data.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>task = Neo4jStalenessRemovalTask()
job_config_dict = {
    &#39;job.identifier&#39;: &#39;remove_stale_data_job&#39;,
    &#39;task.remove_stale_data.neo4j_endpoint&#39;: neo4j_endpoint,
    &#39;task.remove_stale_data.neo4j_user&#39;: neo4j_user,
    &#39;task.remove_stale_data.neo4j_password&#39;: neo4j_password,
    &#39;task.remove_stale_data.staleness_max_pct&#39;: 10,
    &#39;task.remove_stale_data.target_nodes&#39;: [&#39;Table&#39;, &#39;Column&#39;],
    &#39;task.remove_stale_data.job_publish_tag&#39;: &#39;2020-03-31&#39;
}
job_config = ConfigFactory.from_dict(job_config_dict)
job = DefaultJob(conf=job_config, task=task)
job.launch()
</code></pre></div>
</td></tr></table>
<p>Note that there&rsquo;s protection mechanism, <strong>staleness_max_pct</strong>, that protect your data being wiped out when something is clearly wrong. &ldquo;<strong>staleness_max_pct</strong>&rdquo; basically first measure the proportion of elements that will be deleted and if it exceeds threshold per type ( 10% on the configuration above ), the deletion won&rsquo;t be executed and the task aborts.</p>
<h4 id="using-publisher_last_updated_epoch_ms-to-remove-stale-data">Using &ldquo;publisher_last_updated_epoch_ms&rdquo; to remove stale data<a class="headerlink" href="#using-publisher_last_updated_epoch_ms-to-remove-stale-data" title="Permanent link">&para;</a></h4>
<p>You can think this approach as TTL based eviction. This is particularly useful when there are multiple ingestion pipelines and you cannot be sure when all ingestion is done. In this case, you might still can say that if specific node or relation has not been published past 3 days, it&rsquo;s stale data.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>task = Neo4jStalenessRemovalTask()
job_config_dict = {
    &#39;job.identifier&#39;: &#39;remove_stale_data_job&#39;,
    &#39;task.remove_stale_data.neo4j_endpoint&#39;: neo4j_endpoint,
    &#39;task.remove_stale_data.neo4j_user&#39;: neo4j_user,
    &#39;task.remove_stale_data.neo4j_password&#39;: neo4j_password,
    &#39;task.remove_stale_data.staleness_max_pct&#39;: 10,
    &#39;task.remove_stale_data.target_relations&#39;: [&#39;READ&#39;, &#39;READ_BY&#39;],
    &#39;task.remove_stale_data.milliseconds_to_expire&#39;: 86400000 * 3
}
job_config = ConfigFactory.from_dict(job_config_dict)
job = DefaultJob(conf=job_config, task=task)
job.launch()
</code></pre></div>
</td></tr></table>
<p>Above configuration is trying to delete stale usage relation (READ, READ_BY), by deleting READ or READ_BY relation that has not been published past 3 days. If number of elements to be removed is more than 10% per type, this task will be aborted without executing any deletion.</p>
<h4 id="dry-run">Dry run<a class="headerlink" href="#dry-run" title="Permanent link">&para;</a></h4>
<p>Deletion is always scary and it&rsquo;s better to perform dryrun before put this into action. You can use Dry run to see what sort of Cypher query will be executed.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>task = Neo4jStalenessRemovalTask()
job_config_dict = {
    &#39;job.identifier&#39;: &#39;remove_stale_data_job&#39;,
    &#39;task.remove_stale_data.neo4j_endpoint&#39;: neo4j_endpoint,
    &#39;task.remove_stale_data.neo4j_user&#39;: neo4j_user,
    &#39;task.remove_stale_data.neo4j_password&#39;: neo4j_password,
    &#39;task.remove_stale_data.staleness_max_pct&#39;: 10,
    &#39;task.remove_stale_data.target_relations&#39;: [&#39;READ&#39;, &#39;READ_BY&#39;],
    &#39;task.remove_stale_data.milliseconds_to_expire&#39;: 86400000 * 3
    &#39;task.remove_stale_data.dry_run&#39;: True
}
job_config = ConfigFactory.from_dict(job_config_dict)
job = DefaultJob(conf=job_config, task=task)
job.launch()
</code></pre></div>
</td></tr></table>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../metadata/docs/proxy/neptune/" title="Neptune Backend" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Neptune Backend
              </span>
            </div>
          </a>
        
        
          <a href="docs/models/" title="Models" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Models
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2018-2020 Amundsen Project Authors.
          </div>
        
        powered by
        <a href="https://www.mkdocs.org" target="_blank" rel="noopener">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../assets/fonts/font-awesome.css">
    
      <a href="https://www.amundsen.io/" target="_blank" rel="noopener" title="globe" class="md-footer-social__link fa fa-globe"></a>
    
      <a href="https://github.com/amundsen-io" target="_blank" rel="noopener" title="github-alt" class="md-footer-social__link fa fa-github-alt"></a>
    
      <a href="https://twitter.com/amundsenio" target="_blank" rel="noopener" title="twitter" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://www.linkedin.com/company/the-linux-foundation/" target="_blank" rel="noopener" title="linkedin" class="md-footer-social__link fa fa-linkedin"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.c33a9706.js"></script>
      
      <script>app.initialize({version:"1.1",url:{base:".."}})</script>
      
    
  </body>
</html>